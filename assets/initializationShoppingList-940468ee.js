import{x as v,e as rr,y as ar,h as lr,c as nt,z as cr,_ as ur,C as fr,r as Hi,A as ae,B as ti,D as Oe,G as dr,H as hr,I as pr,J as ut,K as Kt,L as mr,M as Wt,N as ni,O as ii,j as gr,P as Ns,Q as _r,R as yr,s as Ui,i as Es,a as xr,n as vr,T as dn,U as br,S as wr,V as kr,w as hn}from"./main-281d79a0.js";function Cr(n={}){if(typeof n!="object")return;const{bookId:e="",bookImage:t="../../img/book_card_plug.png",bookAuthorName:i="Author was stolen",bookTitle:s="Opps, something is wrong :("}=n;return`<li class="book_card" data-bookId="${e}">
      <div class="book_container--img">
        <img src="${t}" alt="${s}, Author:${i}" class="book_card--img" />
        <p class="quick-view">quick view</p>
      </div>
      <h3 class="book_card--title">${s}</h3>
      <p class="book_card--author">${i}</p>
    </li>`}function Nr(n){n.insertAdjacentHTML("afterbegin",'<span class="loader"></span>')}function bu(n,e){const t=e||document.querySelector(".bookshelf");Nr(t);const i=Er(n);t.innerHTML=i}function Er(n){const t=n[0].list_name,i=Is(t),s=Tr(n),o=Ir(s);return`${i} ${o}`}function Ir(n){return`<ul class="bookshelf_category--list">${n.map(t=>Cr(t)).join("")}</ul>`}function Is(n){let e=n.split(" ");const t=e.slice(0,e.length-1).join(" "),i=e.slice(-1);return`<h1 class="bookshelf_category--title">${t} <span class="blue-last-word">${i}</span></h1>`}function Tr(n){return n.map(t=>{let i=t._id,s=t.author,o=t.book_image,r=t.title;return{bookId:i,bookImage:o,bookAuthorName:s,bookTitle:r}})}var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Bn={},Rr={get exports(){return Bn},set exports(n){Bn=n}};(function(n,e){(function(i,s){n.exports=s()})(window,function(){return function(t){var i={};function s(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=t,s.c=i,s.d=function(o,r,a){s.o(o,r)||Object.defineProperty(o,r,{enumerable:!0,get:a})},s.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,r){if(r&1&&(o=s(o)),r&8||r&4&&typeof o=="object"&&o&&o.__esModule)return o;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:o}),r&2&&typeof o!="string")for(var c in o)s.d(a,c,function(l){return o[l]}.bind(null,c));return a},s.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return s.d(r,"a",r),r},s.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},s.p="dist",s(s.s=10)}([function(t,i,s){function o(r,a){var c=Object.prototype.hasOwnProperty,l,u,d,g;for(d=1,g=arguments.length;d<g;d+=1){l=arguments[d];for(u in l)c.call(l,u)&&(r[u]=l[u])}return r}t.exports=o},function(t,i,s){function o(r){return r===void 0}t.exports=o},function(t,i,s){function o(r){return r instanceof Array}t.exports=o},function(t,i,s){var o=s(2),r=s(17),a=s(6);function c(l,u,d){o(l)?r(l,u,d):a(l,u,d)}t.exports=c},function(t,i,s){function o(r){return typeof r=="string"||r instanceof String}t.exports=o},function(t,i,s){function o(r){return r instanceof Function}t.exports=o},function(t,i,s){function o(r,a,c){var l;c=c||null;for(l in r)if(r.hasOwnProperty(l)&&a.call(c,r[l],l,r)===!1)break}t.exports=o},function(t,i,s){var o=s(18),r=s(0);function a(c,l){var u;return l||(l=c,c=null),u=l.init||function(){},c&&o(u,c),l.hasOwnProperty("static")&&(r(u,l.static),delete l.static),r(u.prototype,l),u}t.exports=a},function(t,i,s){var o=s(2);function r(a,c,l){var u,d;if(l=l||0,!o(c))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(c,a,l);for(d=c.length,u=l;l>=0&&u<d;u+=1)if(c[u]===a)return u;return-1}t.exports=r},function(t,i,s){var o=s(29),r=s(30),a=s(5),c={capitalizeFirstLetter:function(l){return l.substring(0,1).toUpperCase()+l.substring(1,l.length)},isContained:function(l,u){return u?l===u?!0:u.contains(l):!1},createElementByTemplate:function(l,u){var d=document.createElement("div"),g=a(l)?l(u):o(l,u);return d.innerHTML=g,d.firstChild},bind:function(l,u){var d=Array.prototype.slice,g;return l.bind?l.bind.apply(l,d.call(arguments,1)):(g=d.call(arguments,2),function(){return l.apply(u,g.length?g.concat(d.call(arguments)):arguments)})},sendHostName:function(){r("pagination","UA-129987462-1")}};t.exports=c},function(t,i,s){s(11),t.exports=s(12)},function(t,i,s){},function(t,i,s){var o=s(13),r=s(7),a=s(0),c=s(1),l=s(20),u=s(9),d={totalItems:10,itemsPerPage:10,visiblePages:10,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",usageStatistics:!0},g=r({init:function(p,h){this._options=a({},d,h),this._currentPage=0,this._view=new l(p,this._options,u.bind(this._onClickHandler,this)),this._paginate(),this._options.usageStatistics&&u.sendHostName()},_setCurrentPage:function(p){this._currentPage=p||this._options.page},_getLastPage:function(){var p=Math.ceil(this._options.totalItems/this._options.itemsPerPage);return p||1},_getPageIndex:function(p){var h,_;return this._options.centerAlign?(h=Math.floor(this._options.visiblePages/2),_=p-h,_=Math.max(_,1),_=Math.min(_,this._getLastPage()-this._options.visiblePages+1),_):Math.ceil(p/this._options.visiblePages)},_getRelativePage:function(p){var h=p==="prev",_=this.getCurrentPage();return h?_-1:_+1},_getMorePageIndex:function(p){var h=this._getPageIndex(this.getCurrentPage()),_=this._options.visiblePages,x=p==="prev",b;return this._options.centerAlign?b=x?h-1:h+_:b=x?(h-1)*_:h*_+1,b},_convertToValidPage:function(p){var h=this._getLastPage();return p=Math.max(p,1),p=Math.min(p,h),p},_paginate:function(p){var h=this._makeViewData(p||this._options.page);this._setCurrentPage(p),this._view.update(h)},_makeViewData:function(p){var h={},_=this._getLastPage(),x=this._getPageIndex(p),b=this._getPageIndex(_),T=this._getEdge(p);return h.leftPageNumber=T.left,h.rightPageNumber=T.right,h.prevMore=x>1,h.nextMore=x<b,h.page=p,h.currentPageIndex=p,h.lastPage=_,h.lastPageListIndex=_,h},_getEdge:function(p){var h,_,x,b=this._getLastPage(),T=this._options.visiblePages,B=this._getPageIndex(p);return this._options.centerAlign?(x=Math.floor(T/2),h=Math.max(p-x,1),_=h+T-1,_>b&&(h=Math.max(b-T+1,1),_=b)):(h=(B-1)*T+1,_=B*T,_=Math.min(_,b)),{left:h,right:_}},_onClickHandler:function(p,h){switch(p){case"first":h=1;break;case"prev":h=this._getRelativePage("prev");break;case"next":h=this._getRelativePage("next");break;case"prevMore":h=this._getMorePageIndex("prev");break;case"nextMore":h=this._getMorePageIndex("next");break;case"last":h=this._getLastPage();break;default:if(!h)return}this.movePageTo(h)},reset:function(p){c(p)&&(p=this._options.totalItems),this._options.totalItems=p,this._paginate(1)},movePageTo:function(p){p=this._convertToValidPage(p),this.invoke("beforeMove",{page:p})&&(this._paginate(p),this.fire("afterMove",{page:p}))},setTotalItems:function(p){this._options.totalItems=p},setItemsPerPage:function(p){this._options.itemsPerPage=p},getCurrentPage:function(){return this._currentPage||this._options.page}});o.mixin(g),t.exports=g},function(t,i,s){var o=s(0),r=s(14),a=s(4),c=s(16),l=s(2),u=s(5),d=s(3),g=/\s+/g;function p(){this.events=null,this.contexts=null}p.mixin=function(h){o(h.prototype,p.prototype)},p.prototype._getHandlerItem=function(h,_){var x={handler:h};return _&&(x.context=_),x},p.prototype._safeEvent=function(h){var _=this.events,x;return _||(_=this.events={}),h&&(x=_[h],x||(x=[],_[h]=x),_=x),_},p.prototype._safeContext=function(){var h=this.contexts;return h||(h=this.contexts=[]),h},p.prototype._indexOfContext=function(h){for(var _=this._safeContext(),x=0;_[x];){if(h===_[x][0])return x;x+=1}return-1},p.prototype._memorizeContext=function(h){var _,x;r(h)&&(_=this._safeContext(),x=this._indexOfContext(h),x>-1?_[x][1]+=1:_.push([h,1]))},p.prototype._forgetContext=function(h){var _,x;r(h)&&(_=this._safeContext(),x=this._indexOfContext(h),x>-1&&(_[x][1]-=1,_[x][1]<=0&&_.splice(x,1)))},p.prototype._bindEvent=function(h,_,x){var b=this._safeEvent(h);this._memorizeContext(x),b.push(this._getHandlerItem(_,x))},p.prototype.on=function(h,_,x){var b=this;a(h)?(h=h.split(g),d(h,function(T){b._bindEvent(T,_,x)})):c(h)&&(x=_,d(h,function(T,B){b.on(B,T,x)}))},p.prototype.once=function(h,_,x){var b=this;if(c(h)){x=_,d(h,function(B,w){b.once(w,B,x)});return}function T(){_.apply(x,arguments),b.off(h,T,x)}this.on(h,T,x)},p.prototype._spliceMatches=function(h,_){var x=0,b;if(l(h))for(b=h.length;x<b;x+=1)_(h[x])===!0&&(h.splice(x,1),b-=1,x-=1)},p.prototype._matchHandler=function(h){var _=this;return function(x){var b=h===x.handler;return b&&_._forgetContext(x.context),b}},p.prototype._matchContext=function(h){var _=this;return function(x){var b=h===x.context;return b&&_._forgetContext(x.context),b}},p.prototype._matchHandlerAndContext=function(h,_){var x=this;return function(b){var T=h===b.handler,B=_===b.context,w=T&&B;return w&&x._forgetContext(b.context),w}},p.prototype._offByEventName=function(h,_){var x=this,b=u(_),T=x._matchHandler(_);h=h.split(g),d(h,function(B){var w=x._safeEvent(B);b?x._spliceMatches(w,T):(d(w,function(C){x._forgetContext(C.context)}),x.events[B]=[])})},p.prototype._offByHandler=function(h){var _=this,x=this._matchHandler(h);d(this._safeEvent(),function(b){_._spliceMatches(b,x)})},p.prototype._offByObject=function(h,_){var x=this,b;this._indexOfContext(h)<0?d(h,function(T,B){x.off(B,T)}):a(_)?(b=this._matchContext(h),x._spliceMatches(this._safeEvent(_),b)):u(_)?(b=this._matchHandlerAndContext(_,h),d(this._safeEvent(),function(T){x._spliceMatches(T,b)})):(b=this._matchContext(h),d(this._safeEvent(),function(T){x._spliceMatches(T,b)}))},p.prototype.off=function(h,_){a(h)?this._offByEventName(h,_):arguments.length?u(h)?this._offByHandler(h):c(h)&&this._offByObject(h,_):(this.events={},this.contexts=[])},p.prototype.fire=function(h){this.invoke.apply(this,arguments)},p.prototype.invoke=function(h){var _,x,b,T;if(!this.hasListener(h))return!0;for(_=this._safeEvent(h),x=Array.prototype.slice.call(arguments,1),b=0;_[b];){if(T=_[b],T.handler.apply(T.context,x)===!1)return!1;b+=1}return!0},p.prototype.hasListener=function(h){return this.getListenerLength(h)>0},p.prototype.getListenerLength=function(h){var _=this._safeEvent(h);return _.length},t.exports=p},function(t,i,s){var o=s(1),r=s(15);function a(c){return!o(c)&&!r(c)}t.exports=a},function(t,i,s){function o(r){return r===null}t.exports=o},function(t,i,s){function o(r){return r===Object(r)}t.exports=o},function(t,i,s){function o(r,a,c){var l=0,u=r.length;for(c=c||null;l<u&&a.call(c,r[l],l,r)!==!1;l+=1);}t.exports=o},function(t,i,s){var o=s(19);function r(a,c){var l=o(c.prototype);l.constructor=a,a.prototype=l}t.exports=r},function(t,i,s){function o(r){function a(){}return a.prototype=r,new a}t.exports=o},function(t,i,s){var o=s(3),r=s(7),a=s(21),c=s(22),l=s(24),u=s(25),d=s(0),g=s(4),p=s(28),h=s(9),_={page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'},x=["first","prev","next","last"],b=["prev","next"],T="The container element is invalid.",B=r({init:function(w,C,A){this._containerElement=null,this._firstItemClassName=C.firstItemClassName,this._lastItemClassName=C.lastItemClassName,this._template=d({},_,C.template),this._buttons={},this._enabledPageElements=[],this._setRootElement(w),this._setMoveButtons(),this._setDisabledMoveButtons(),this._setMoreButtons(),this._attachClickEvent(A)},_setRootElement:function(w){if(g(w)?w=document.getElementById(w)||document.querySelector(w):w.jquery&&(w=w[0]),!p(w))throw new Error(T);this._containerElement=w},_setMoveButtons:function(){o(x,function(w){this._buttons[w]=h.createElementByTemplate(this._template.moveButton,{type:w})},this)},_setDisabledMoveButtons:function(){o(x,function(w){var C="disabled"+h.capitalizeFirstLetter(w);this._buttons[C]=h.createElementByTemplate(this._template.disabledMoveButton,{type:w})},this)},_setMoreButtons:function(){o(b,function(w){var C=w+"More";this._buttons[C]=h.createElementByTemplate(this._template.moreButton,{type:w})},this)},_getContainerElement:function(){return this._containerElement},_appendFirstButton:function(w){var C;w.page>1?C=this._buttons.first:C=this._buttons.disabledFirst,this._getContainerElement().appendChild(C)},_appendPrevButton:function(w){var C;w.currentPageIndex>1?C=this._buttons.prev:C=this._buttons.disabledPrev,this._getContainerElement().appendChild(C)},_appendNextButton:function(w){var C;w.currentPageIndex<w.lastPageListIndex?C=this._buttons.next:C=this._buttons.disabledNext,this._getContainerElement().appendChild(C)},_appendLastButton:function(w){var C;w.page<w.lastPage?C=this._buttons.last:C=this._buttons.disabledLast,this._getContainerElement().appendChild(C)},_appendPrevMoreButton:function(w){var C;w.prevMore&&(C=this._buttons.prevMore,u(C,this._firstItemClassName),this._getContainerElement().appendChild(C))},_appendNextMoreButton:function(w){var C;w.nextMore&&(C=this._buttons.nextMore,u(C,this._lastItemClassName),this._getContainerElement().appendChild(C))},_appendPages:function(w){var C=w.leftPageNumber,A=w.rightPageNumber,N,U;for(U=C;U<=A;U+=1)U===w.page?N=h.createElementByTemplate(this._template.currentPage,{page:U}):(N=h.createElementByTemplate(this._template.page,{page:U}),this._enabledPageElements.push(N)),U===C&&!w.prevMore&&u(N,this._firstItemClassName),U===A&&!w.nextMore&&u(N,this._lastItemClassName),this._getContainerElement().appendChild(N)},_attachClickEvent:function(w){var C=this._getContainerElement();c(C,"click",function(A){var N=a(A),U,Se;l(A),Se=this._getButtonType(N),Se||(U=this._getPageNumber(N)),w(Se,U)},this)},_getButtonType:function(w){var C,A=this._buttons;return o(A,function(N,U){return h.isContained(w,N)?(C=U,!1):!0},this),C},_getPageNumber:function(w){var C=this._findPageElement(w),A;return C&&(A=parseInt(C.innerText,10)),A},_findPageElement:function(w){for(var C=0,A=this._enabledPageElements.length,N;C<A;C+=1)if(N=this._enabledPageElements[C],h.isContained(w,N))return N;return null},_empty:function(){this._enabledPageElements=[],o(this._buttons,function(w,C){this._buttons[C]=w.cloneNode(!0)},this),this._getContainerElement().innerHTML=""},update:function(w){this._empty(),this._appendFirstButton(w),this._appendPrevButton(w),this._appendPrevMoreButton(w),this._appendPages(w),this._appendNextMoreButton(w),this._appendNextButton(w),this._appendLastButton(w)}});t.exports=B},function(t,i,s){function o(r){return r.target||r.srcElement}t.exports=o},function(t,i,s){var o=s(4),r=s(3),a=s(23);function c(d,g,p,h){if(o(g)){r(g.split(/\s+/g),function(_){l(d,_,p,h)});return}r(g,function(_,x){l(d,x,_,p)})}function l(d,g,p,h){function _(x){p.call(h||d,x||window.event)}"addEventListener"in d?d.addEventListener(g,_):"attachEvent"in d&&d.attachEvent("on"+g,_),u(d,g,p,_)}function u(d,g,p,h){var _=a(d,g),x=!1;r(_,function(b){return b.handler===p?(x=!0,!1):!0}),x||_.push({handler:p,wrappedHandler:h})}t.exports=c},function(t,i,s){var o="_feEventKey";function r(a,c){var l=a[o],u;return l||(l=a[o]={}),u=l[c],u||(u=l[c]=[]),u}t.exports=r},function(t,i,s){function o(r){if(r.preventDefault){r.preventDefault();return}r.returnValue=!1}t.exports=o},function(t,i,s){var o=s(3),r=s(8),a=s(26),c=s(27);function l(u){var d=Array.prototype.slice.call(arguments,1),g=u.classList,p=[],h;if(g){o(d,function(_){u.classList.add(_)});return}h=a(u),h&&(d=[].concat(h.split(/\s+/),d)),o(d,function(_){r(_,p)<0&&p.push(_)}),c(u,p)}t.exports=l},function(t,i,s){var o=s(1);function r(a){return!a||!a.className?"":o(a.className.baseVal)?a.className:a.className.baseVal}t.exports=r},function(t,i,s){var o=s(2),r=s(1);function a(c,l){if(l=o(l)?l.join(" "):l,l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),r(c.className.baseVal)){c.className=l;return}c.className.baseVal=l}t.exports=a},function(t,i,s){function o(r){return typeof HTMLElement=="object"?r&&(r instanceof HTMLElement||!!r.nodeType):!!(r&&r.nodeType)}t.exports=o},function(t,i,s){var o=s(8),r=s(3),a=s(2),c=s(4),l=s(0),u=/{{\s?|\s?}}/g,d=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,g=/\[\s?|\s?\]/,p=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,h=/\./,_=/^["']\w+["']$/,x=/"|'/g,b=/^-?\d+\.?\d*$/,T=2,B={if:U,each:Se,with:Nn},w="a".split(/a/).length===3,C=function(){return w?function(E,M){return E.split(M)}:function(E,M){var L=[],F=0,V,$;for(M.global||(M=new RegExp(M,"g")),V=M.exec(E);V!==null;)$=V.index,L.push(E.slice(F,$)),F=$+V[0].length,V=M.exec(E);return L.push(E.slice(F)),L}}();function A(E,M){var L,F=M[E];return E==="true"?F=!0:E==="false"?F=!1:_.test(E)?F=E.replace(x,""):d.test(E)?(L=E.split(g),F=A(L[0],M)[A(L[1],M)]):p.test(E)?(L=E.split(h),F=A(L[0],M)[L[1]]):b.test(E)&&(F=parseFloat(E)),F}function N(E,M){var L=[E],F=[],V=0,$=0;return r(M,function(te,de){te.indexOf("if")===0?V+=1:te==="/if"?V-=1:!V&&(te.indexOf("elseif")===0||te==="else")&&(L.push(te==="else"?["true"]:te.split(" ").slice(1)),F.push(M.slice($,de)),$=de+1)}),F.push(M.slice($)),{exps:L,sourcesInsideIf:F}}function U(E,M,L){var F=N(E,M),V=!1,$="";return r(F.exps,function(te,de){return V=je(te,L),V&&($=Ge(F.sourcesInsideIf[de],L)),!V}),$}function Se(E,M,L){var F=je(E,L),V=a(F)?"@index":"@key",$={},te="";return r(F,function(de,Fe){$[V]=Fe,$["@this"]=de,l(L,$),te+=Ge(M.slice(),L)}),te}function Nn(E,M,L){var F=o("as",E),V=E[F+1],$=je(E.slice(0,F),L),te={};return te[V]=$,Ge(M,l(L,te))||""}function En(E,M,L){var F=E.splice(M+1,L-M);return F.pop(),F}function In(E,M,L){for(var F=B[E],V=1,$=0,te,de=$+T,Fe=M[de];V&&c(Fe);)Fe.indexOf(E)===0?V+=1:Fe.indexOf("/"+E)===0&&(V-=1,te=de),de+=T,Fe=M[de];if(V)throw Error(E+" needs {{/"+E+"}} expression.");return M[$]=F(M[$].split(" ").slice(1),En(M,$,te),L),M}function je(E,M){var L=A(E[0],M);return L instanceof Function?Gt(L,E.slice(1),M):L}function Gt(E,M,L){var F=[];return r(M,function(V){F.push(A(V,L))}),E.apply(null,F)}function Ge(E,M){for(var L=1,F=E[L],V,$,te;c(F);)V=F.split(" "),$=V[0],B[$]?(te=In($,E.splice(L,E.length-L),M),E=E.concat(te)):E[L]=je(V,M),L+=T,F=E[L];return E.join("")}function qt(E,M){return Ge(C(E,u),M)}t.exports=qt},function(t,i,s){var o=s(1),r=s(31),a=7*24*60*60*1e3;function c(u){var d=new Date().getTime();return d-u>a}function l(u,d){var g="https://www.google-analytics.com/collect",p=location.hostname,h="event",_="use",x="TOAST UI "+u+" for "+p+": Statistics",b=window.localStorage.getItem(x);!o(window.tui)&&window.tui.usageStatistics===!1||b&&!c(b)||(window.localStorage.setItem(x,new Date().getTime()),setTimeout(function(){(document.readyState==="interactive"||document.readyState==="complete")&&r(g,{v:1,t:h,tid:d,cid:p,dp:p,dh:u,el:u,ec:_})},1e3))}t.exports=l},function(t,i,s){var o=s(6);function r(a,c){var l=document.createElement("img"),u="";return o(c,function(d,g){u+="&"+g+"="+d}),u=u.substring(1),l.src=a+"?"+u,l.style.display="none",document.body.appendChild(l),document.body.removeChild(l),l}t.exports=r}])})})(Rr);const Pr=Sr(Bn);function Ar(n,e){return{totalItems:n.length,itemsPerPage:1,visiblePages:e,page:1,centerAlign:!0,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{ type }}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{ type }}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}}function Mr(n,e,t){const i=document.getElementById("pagination");new Pr(i,n).on("afterMove",function(o){const r=o.page-1,a=e[r];booksContainer.innerHTML="",t(a)})}var Lr="Expected a function",Xi=0/0,Or="[object Symbol]",Dr=/^\s+|\s+$/g,Fr=/^[-+]0x[0-9a-f]+$/i,zr=/^0b[01]+$/i,Wr=/^0o[0-7]+$/i,Br=parseInt,Hr=typeof $e=="object"&&$e&&$e.Object===Object&&$e,Ur=typeof self=="object"&&self&&self.Object===Object&&self,Xr=Hr||Ur||Function("return this")(),Vr=Object.prototype,jr=Vr.toString,Gr=Math.max,qr=Math.min,Pn=function(){return Xr.Date.now()};function Yr(n,e,t){var i,s,o,r,a,c,l=0,u=!1,d=!1,g=!0;if(typeof n!="function")throw new TypeError(Lr);e=Vi(e)||0,Hn(t)&&(u=!!t.leading,d="maxWait"in t,o=d?Gr(Vi(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g);function p(A){var N=i,U=s;return i=s=void 0,l=A,r=n.apply(U,N),r}function h(A){return l=A,a=setTimeout(b,e),u?p(A):r}function _(A){var N=A-c,U=A-l,Se=e-N;return d?qr(Se,o-U):Se}function x(A){var N=A-c,U=A-l;return c===void 0||N>=e||N<0||d&&U>=o}function b(){var A=Pn();if(x(A))return T(A);a=setTimeout(b,_(A))}function T(A){return a=void 0,g&&i?p(A):(i=s=void 0,r)}function B(){a!==void 0&&clearTimeout(a),l=0,i=c=s=a=void 0}function w(){return a===void 0?r:T(Pn())}function C(){var A=Pn(),N=x(A);if(i=arguments,s=this,c=A,N){if(a===void 0)return h(c);if(d)return a=setTimeout(b,e),p(c)}return a===void 0&&(a=setTimeout(b,e)),r}return C.cancel=B,C.flush=w,C}function Hn(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function $r(n){return!!n&&typeof n=="object"}function Qr(n){return typeof n=="symbol"||$r(n)&&jr.call(n)==Or}function Vi(n){if(typeof n=="number")return n;if(Qr(n))return Xi;if(Hn(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Hn(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(Dr,"");var t=zr.test(n);return t||Wr.test(n)?Br(n.slice(2),t?2:8):Fr.test(n)?Xi:+n}var Kr=Yr,Un={},Jr={get exports(){return Un},set exports(n){Un=n}};(function(n){(function(e,t){n.exports=t(e)})(typeof $e>"u"?typeof window>"u"?$e:window:$e,function(e){if(typeof e>"u"&&typeof e.document>"u")return!1;var t,i,s,o,r,a=`

Visit documentation page to learn more: https://notiflix.github.io/documentation`,c='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',l={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},u={wrapID:"NotiflixNotifyWrap",overlayID:"NotiflixNotifyOverlay",width:"280px",position:"right-top",distance:"10px",opacity:1,borderRadius:"5px",rtl:!1,timeout:3e3,messageMaxLength:110,backOverlay:!1,backOverlayColor:"rgba(0,0,0,0.5)",plainText:!0,showOnlyTheLastOne:!1,clickToClose:!1,pauseOnHover:!0,ID:"NotiflixNotify",className:"notiflix-notify",zindex:4001,fontFamily:"Quicksand",fontSize:"13px",cssAnimation:!0,cssAnimationDuration:400,cssAnimationStyle:"fade",closeButton:!1,useIcon:!0,useFontAwesome:!1,fontAwesomeIconStyle:"basic",fontAwesomeIconSize:"34px",success:{background:"#32c682",textColor:"#fff",childClassName:"notiflix-notify-success",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-check-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{background:"#ff5549",textColor:"#fff",childClassName:"notiflix-notify-failure",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-times-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{background:"#eebf31",textColor:"#fff",childClassName:"notiflix-notify-warning",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-exclamation-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(238,191,49,0.2)"},info:{background:"#26c0d3",textColor:"#fff",childClassName:"notiflix-notify-info",notiflixIconColor:"rgba(0,0,0,0.2)",fontAwesomeClassName:"fas fa-info-circle",fontAwesomeIconColor:"rgba(0,0,0,0.2)",backOverlayColor:"rgba(38,192,211,0.2)"}},d={Success:"Success",Failure:"Failure",Warning:"Warning",Info:"Info"},g={ID:"NotiflixReportWrap",className:"notiflix-report",width:"320px",backgroundColor:"#f8f8f8",borderRadius:"25px",rtl:!1,zindex:4002,backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",backOverlayClickToClose:!1,fontFamily:"Quicksand",svgSize:"110px",plainText:!0,titleFontSize:"16px",titleMaxLength:34,messageFontSize:"13px",messageMaxLength:400,buttonFontSize:"14px",buttonMaxLength:34,cssAnimation:!0,cssAnimationDuration:360,cssAnimationStyle:"fade",success:{svgColor:"#32c682",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#32c682",buttonColor:"#fff",backOverlayColor:"rgba(50,198,130,0.2)"},failure:{svgColor:"#ff5549",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#ff5549",buttonColor:"#fff",backOverlayColor:"rgba(255,85,73,0.2)"},warning:{svgColor:"#eebf31",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#eebf31",buttonColor:"#fff",backOverlayColor:"rgba(238,191,49,0.2)"},info:{svgColor:"#26c0d3",titleColor:"#1e1e1e",messageColor:"#242424",buttonBackground:"#26c0d3",buttonColor:"#fff",backOverlayColor:"rgba(38,192,211,0.2)"}},p={Show:"Show",Ask:"Ask",Prompt:"Prompt"},h={ID:"NotiflixConfirmWrap",className:"notiflix-confirm",width:"300px",zindex:4003,position:"center",distance:"10px",backgroundColor:"#f8f8f8",borderRadius:"25px",backOverlay:!0,backOverlayColor:"rgba(0,0,0,0.5)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,cssAnimationStyle:"fade",plainText:!0,titleColor:"#32c682",titleFontSize:"16px",titleMaxLength:34,messageColor:"#1e1e1e",messageFontSize:"14px",messageMaxLength:110,buttonsFontSize:"15px",buttonsMaxLength:34,okButtonColor:"#f8f8f8",okButtonBackground:"#32c682",cancelButtonColor:"#f8f8f8",cancelButtonBackground:"#a9a9a9"},_={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse",Custom:"Custom",Notiflix:"Notiflix"},x={ID:"NotiflixLoadingWrap",className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"#32c682",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"},b={Standard:"Standard",Hourglass:"Hourglass",Circle:"Circle",Arrows:"Arrows",Dots:"Dots",Pulse:"Pulse"},T={ID:"NotiflixBlockWrap",querySelectorLimit:200,className:"notiflix-block",position:"absolute",zindex:1e3,backgroundColor:"rgba(255,255,255,0.9)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:300,svgSize:"45px",svgColor:"#383838",messageFontSize:"14px",messageMaxLength:34,messageColor:"#383838"},B=function(f){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549",`
`+f+a)},w=function(f){return console.log("%c Notiflix Info ","padding:2px;border-radius:20px;color:#fff;background:#26c0d3",`
`+f+a)},C=function(f){return f||(f="head"),e.document[f]!==null||(B(`
Notiflix needs to be appended to the "<`+f+'>" element, but you called it before the "<'+f+'>" element has been created.'),!1)},A=function(f,m){if(!C("head"))return!1;if(f()!==null&&!e.document.getElementById(m)){var y=e.document.createElement("style");y.id=m,y.innerHTML=f(),e.document.head.appendChild(y)}},N=function(){var f={},m=!1,y=0;Object.prototype.toString.call(arguments[0])==="[object Boolean]"&&(m=arguments[0],y++);for(var I=function(P){for(var z in P)Object.prototype.hasOwnProperty.call(P,z)&&(f[z]=m&&Object.prototype.toString.call(P[z])==="[object Object]"?N(f[z],P[z]):P[z])};y<arguments.length;y++)I(arguments[y]);return f},U=function(f){var m=e.document.createElement("div");return m.innerHTML=f,m.textContent||m.innerText||""},Se=function(f,m){f||(f="110px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportSuccess" width="'+f+'" height="'+f+'" fill="'+m+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@keyframes NXReportSuccess1-animation{0%{-webkit-transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.5,.5) translate(-60px,-57.7px)}50%,to{-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px)}60%{-webkit-transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px);transform:translate(60px,57.7px) scale(.95,.95) translate(-60px,-57.7px)}}@-webkit-keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportSuccess4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportSuccess3-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportSuccess2-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportSuccess *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportSuccess2-animation;animation-name:NXReportSuccess2-animation;-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportSuccess3-animation;animation-name:NXReportSuccess3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportSuccess1-animation;animation-name:NXReportSuccess1-animation;-webkit-transform:translate(60px,57.7px) scale(1,1) translate(-60px,-57.7px);-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)"><path d="M88.27 35.39L52.8 75.29 31.43 58.2c-.98-.81-2.44-.63-3.24.36-.79.99-.63 2.44.36 3.24l23.08 18.46c.43.34.93.51 1.44.51.64 0 1.27-.26 1.74-.78l36.91-41.53a2.3 2.3 0 0 0-.19-3.26c-.95-.86-2.41-.77-3.26.19z" style="-webkit-animation-name:NXReportSuccess4-animation;animation-name:NXReportSuccess4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>';return y},Nn=function(f,m){f||(f="110px"),m||(m="#ff5549");var y='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportFailure" width="'+f+'" height="'+f+'" fill="'+m+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportFailure2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportFailure3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportFailure4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportFailure *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportFailure1-animation;animation-name:NXReportFailure1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M4.35 34.95c0-16.82 13.78-30.6 30.6-30.6h50.1c16.82 0 30.6 13.78 30.6 30.6v50.1c0 16.82-13.78 30.6-30.6 30.6h-50.1c-16.82 0-30.6-13.78-30.6-30.6v-50.1zM34.95 120h50.1c19.22 0 34.95-15.73 34.95-34.95v-50.1C120 15.73 104.27 0 85.05 0h-50.1C15.73 0 0 15.73 0 34.95v50.1C0 104.27 15.73 120 34.95 120z" style="-webkit-animation-name:NXReportFailure2-animation;animation-name:NXReportFailure2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportFailure3-animation;animation-name:NXReportFailure3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M82.4 37.6c-.9-.9-2.37-.9-3.27 0L60 56.73 40.86 37.6a2.306 2.306 0 0 0-3.26 3.26L56.73 60 37.6 79.13c-.9.9-.9 2.37 0 3.27.45.45 1.04.68 1.63.68.59 0 1.18-.23 1.63-.68L60 63.26 79.13 82.4c.45.45 1.05.68 1.64.68.58 0 1.18-.23 1.63-.68.9-.9.9-2.37 0-3.27L63.26 60 82.4 40.86c.9-.91.9-2.36 0-3.26z" style="-webkit-animation-name:NXReportFailure4-animation;animation-name:NXReportFailure4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>';return y},En=function(f,m){f||(f="110px"),m||(m="#eebf31");var y='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportWarning" width="'+f+'" height="'+f+'" fill="'+m+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportWarning2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportWarning1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@keyframes NXReportWarning3-animation{0%{-webkit-transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.5,.5) translate(-60px,-66.6px)}50%,to{-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)}60%{-webkit-transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px);transform:translate(60px,66.6px) scale(.95,.95) translate(-60px,-66.6px)}}@-webkit-keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportWarning4-animation{0%{opacity:0}50%,to{opacity:1}}#NXReportWarning *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportWarning1-animation;animation-name:NXReportWarning1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M115.46 106.15l-54.04-93.8c-.61-1.06-2.23-1.06-2.84 0l-54.04 93.8c-.62 1.07.21 2.29 1.42 2.29h108.08c1.21 0 2.04-1.22 1.42-2.29zM65.17 10.2l54.04 93.8c2.28 3.96-.65 8.78-5.17 8.78H5.96c-4.52 0-7.45-4.82-5.17-8.78l54.04-93.8c2.28-3.95 8.03-4 10.34 0z" style="-webkit-animation-name:NXReportWarning2-animation;animation-name:NXReportWarning2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportWarning3-animation;animation-name:NXReportWarning3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,66.6px) scale(1,1) translate(-60px,-66.6px)"><path d="M57.83 94.01c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17v-3.2c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v3.2zm0-14.15c0 1.2.97 2.17 2.17 2.17s2.17-.97 2.17-2.17V39.21c0-1.2-.97-2.17-2.17-2.17s-2.17.97-2.17 2.17v40.65z" style="-webkit-animation-name:NXReportWarning4-animation;animation-name:NXReportWarning4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>';return y},In=function(f,m){f||(f="110px"),m||(m="#26c0d3");var y='<svg xmlns="http://www.w3.org/2000/svg" id="NXReportInfo" width="'+f+'" height="'+f+'" fill="'+m+'" viewBox="0 0 120 120"><style>@-webkit-keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@keyframes NXReportInfo4-animation{0%{opacity:0}50%,to{opacity:1}}@-webkit-keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo3-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}50%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@-webkit-keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@keyframes NXReportInfo2-animation{0%{opacity:0}40%,to{opacity:1}}@-webkit-keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}@keyframes NXReportInfo1-animation{0%{-webkit-transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px);transform:translate(60px,60px) scale(.5,.5) translate(-60px,-60px)}40%,to{-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px);transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)}60%{-webkit-transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px);transform:translate(60px,60px) scale(.95,.95) translate(-60px,-60px)}}#NXReportInfo *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g style="-webkit-animation-name:NXReportInfo1-animation;animation-name:NXReportInfo1-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M60 115.38C29.46 115.38 4.62 90.54 4.62 60 4.62 29.46 29.46 4.62 60 4.62c30.54 0 55.38 24.84 55.38 55.38 0 30.54-24.84 55.38-55.38 55.38zM60 0C26.92 0 0 26.92 0 60s26.92 60 60 60 60-26.92 60-60S93.08 0 60 0z" style="-webkit-animation-name:NXReportInfo2-animation;animation-name:NXReportInfo2-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g><g style="-webkit-animation-name:NXReportInfo3-animation;animation-name:NXReportInfo3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform:translate(60px,60px) scale(1,1) translate(-60px,-60px)"><path d="M57.75 43.85c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v48.18c0 1.24-1.01 2.25-2.25 2.25s-2.25-1.01-2.25-2.25V43.85zm0-15.88c0-1.24 1.01-2.25 2.25-2.25s2.25 1.01 2.25 2.25v3.32c0 1.25-1.01 2.25-2.25 2.25s-2.25-1-2.25-2.25v-3.32z" style="-webkit-animation-name:NXReportInfo4-animation;animation-name:NXReportInfo4-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1)" fill="inherit" data-animator-group="true" data-animator-type="2"/></g></svg>';return y},je=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" stroke="'+m+'" width="'+f+'" height="'+f+'" transform="scale(.8)" viewBox="0 0 38 38"><g fill="none" fill-rule="evenodd" stroke-width="2" transform="translate(1 1)"><circle cx="18" cy="18" r="18" stroke-opacity=".25"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" dur="1s" from="0 18 18" repeatCount="indefinite" to="360 18 18" type="rotate"/></path></g></svg>';return y},Gt=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingHourglass" fill="'+m+'" width="'+f+'" height="'+f+'" viewBox="0 0 200 200"><style>@-webkit-keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@-webkit-keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}#NXLoadingHourglass *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g data-animator-group="true" data-animator-type="1" style="-webkit-animation-name:NXhourglass1-animation;animation-name:NXhourglass1-animation;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transform-box:fill-box"><g id="NXhourglass2" fill="inherit"><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass3-animation;animation-name:NXhourglass3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass4" d="M100 100l-34.38 32.08v31.14h68.76v-31.14z"/></g><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass5-animation;animation-name:NXhourglass5-animation;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass6" d="M100 100L65.62 67.92V36.78h68.76v31.14z"/></g><path d="M51.14 38.89h8.33v14.93c0 15.1 8.29 28.99 23.34 39.1 1.88 1.25 3.04 3.97 3.04 7.08s-1.16 5.83-3.04 7.09c-15.05 10.1-23.34 23.99-23.34 39.09v14.93h-8.33a4.859 4.859 0 1 0 0 9.72h97.72a4.859 4.859 0 1 0 0-9.72h-8.33v-14.93c0-15.1-8.29-28.99-23.34-39.09-1.88-1.26-3.04-3.98-3.04-7.09s1.16-5.83 3.04-7.08c15.05-10.11 23.34-24 23.34-39.1V38.89h8.33a4.859 4.859 0 1 0 0-9.72H51.14a4.859 4.859 0 1 0 0 9.72zm79.67 14.93c0 15.87-11.93 26.25-19.04 31.03-4.6 3.08-7.34 8.75-7.34 15.15 0 6.41 2.74 12.07 7.34 15.15 7.11 4.78 19.04 15.16 19.04 31.03v14.93H69.19v-14.93c0-15.87 11.93-26.25 19.04-31.02 4.6-3.09 7.34-8.75 7.34-15.16 0-6.4-2.74-12.07-7.34-15.15-7.11-4.78-19.04-15.16-19.04-31.03V38.89h61.62v14.93z"/></g></g></svg>';return y},Ge=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" width="'+f+'" height="'+f+'" viewBox="25 25 50 50" style="-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;height:'+f+";-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center;width:"+f+';position:absolute;top:0;left:0;margin:auto"><style>@-webkit-keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}</style><circle cx="50" cy="50" r="20" fill="none" stroke="'+m+'" stroke-width="2" style="-webkit-animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite" stroke-dasharray="150 200" stroke-dashoffset="-10" stroke-linecap="round"/></svg>';return y},qt=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" fill="'+m+'" width="'+f+'" height="'+f+'" viewBox="0 0 128 128"><g><path fill="inherit" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" dur="1.5s" from="0 64 64" repeatCount="indefinite" to="360 64 64" type="rotate"/></g></svg>';return y},E=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" fill="'+m+'" width="'+f+'" height="'+f+'" viewBox="0 0 100 100"><g transform="translate(25 50)"><circle r="9" fill="inherit" transform="scale(.239)"><animateTransform attributeName="transform" begin="-0.266s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(50 50)"><circle r="9" fill="inherit" transform="scale(.00152)"><animateTransform attributeName="transform" begin="-0.133s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(75 50)"><circle r="9" fill="inherit" transform="scale(.299)"><animateTransform attributeName="transform" begin="0s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g></svg>';return y},M=function(f,m){f||(f="60px"),m||(m="#32c682");var y='<svg xmlns="http://www.w3.org/2000/svg" stroke="'+m+'" width="'+f+'" height="'+f+'" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>';return y},L=function(f,m,y){f||(f="60px"),m||(m="#f8f8f8"),y||(y="#32c682");var I='<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingNotiflixLib" width="'+f+'" height="'+f+'" viewBox="0 0 200 200"><defs><style>@keyframes notiflix-n{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-x{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-dot{0%,to{stroke-width:0}50%{stroke-width:12}}.nx-icon-line{stroke:'+m+';stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:22;fill:none}</style></defs><path d="M47.97 135.05a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13z" style="animation-name:notiflix-dot;animation-timing-function:ease-in-out;animation-duration:1.25s;animation-iteration-count:infinite;animation-direction:normal" fill="'+y+'" stroke="'+y+'" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22" stroke-width="12"/><path class="nx-icon-line" d="M10.14 144.76V87.55c0-5.68-4.54-41.36 37.83-41.36 42.36 0 37.82 35.68 37.82 41.36v57.21" style="animation-name:notiflix-n;animation-timing-function:linear;animation-duration:2.5s;animation-delay:0s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/><path class="nx-icon-line" d="M115.06 144.49c24.98-32.68 49.96-65.35 74.94-98.03M114.89 46.6c25.09 32.58 50.19 65.17 75.29 97.75" style="animation-name:notiflix-x;animation-timing-function:linear;animation-duration:2.5s;animation-delay:.2s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/></svg>';return I},F=function(){return'[id^=NotiflixNotifyWrap]{pointer-events:none;position:fixed;z-index:4001;opacity:1;right:10px;top:10px;width:280px;max-width:96%;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent}[id^=NotiflixNotifyWrap].nx-flex-center-center{max-height:calc(100vh - 20px);overflow-x:hidden;overflow-y:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin:auto}[id^=NotiflixNotifyWrap]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixNotifyWrap]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixNotifyWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyOverlay]{-webkit-transition:background .3s ease-in-out;-o-transition:background .3s ease-in-out;transition:background .3s ease-in-out}[id^=NotiflixNotifyWrap]>div{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;width:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;position:relative;margin:0 0 10px;border-radius:5px;background:#1e1e1e;color:#fff;padding:10px 12px;font-size:14px;line-height:1.4}[id^=NotiflixNotifyWrap]>div:last-child{margin:0}[id^=NotiflixNotifyWrap]>div.nx-with-callback{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-icon{padding:8px;min-height:56px}[id^=NotiflixNotifyWrap]>div.nx-paused{cursor:auto}[id^=NotiflixNotifyWrap]>div.nx-notify-click-to-close{cursor:pointer}[id^=NotiflixNotifyWrap]>div.nx-with-close-button{padding:10px 36px 10px 12px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button{padding:6px 36px 6px 6px}[id^=NotiflixNotifyWrap]>div>span.nx-message{cursor:inherit;font-weight:normal;font-family:inherit!important;word-break:break-all;word-break:break-word}[id^=NotiflixNotifyWrap]>div>span.nx-close-button{cursor:pointer;-webkit-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;position:absolute;right:8px;top:0;bottom:0;margin:auto;color:inherit;width:20px;height:20px}[id^=NotiflixNotifyWrap]>div>span.nx-close-button:hover{-webkit-transform:rotate(90deg);transform:rotate(90deg)}[id^=NotiflixNotifyWrap]>div>span.nx-close-button>svg{position:absolute;width:16px;height:16px;right:2px;top:2px}[id^=NotiflixNotifyWrap]>div>.nx-message-icon{position:absolute;width:40px;height:40px;font-size:30px;line-height:40px;text-align:center;left:8px;top:0;bottom:0;margin:auto;border-radius:inherit}[id^=NotiflixNotifyWrap]>div>.nx-message-icon-fa.nx-message-icon-fa-shadow{color:inherit;background:rgba(0,0,0,.15);-webkit-box-shadow:inset 0 0 34px rgba(0,0,0,.2);box-shadow:inset 0 0 34px rgba(0,0,0,.2);text-shadow:0 0 10px rgba(0,0,0,.3)}[id^=NotiflixNotifyWrap]>div>span.nx-with-icon{position:relative;float:left;width:calc(100% - 40px);margin:0 0 0 40px;padding:0 0 0 10px;-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>.nx-message-icon{left:auto;right:8px}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-with-icon{padding:0 10px 0 0;margin:0 40px 0 0}[id^=NotiflixNotifyWrap]>div.nx-rtl-on>span.nx-close-button{right:auto;left:8px}[id^=NotiflixNotifyWrap]>div.nx-with-icon.nx-with-close-button.nx-rtl-on{padding:6px 6px 6px 36px}[id^=NotiflixNotifyWrap]>div.nx-with-close-button.nx-rtl-on{padding:10px 12px 10px 36px}[id^=NotiflixNotifyOverlay].nx-with-animation,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade{-webkit-animation:notify-animation-fade .3s ease-in-out 0s normal;animation:notify-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes notify-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom{-webkit-animation:notify-animation-zoom .3s ease-in-out 0s normal;animation:notify-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes notify-animation-zoom{0%{-webkit-transform:scale(0);transform:scale(0)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right{-webkit-animation:notify-animation-from-right .3s ease-in-out 0s normal;animation:notify-animation-from-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}@keyframes notify-animation-from-right{0%{right:-300px;opacity:0}50%{right:8px;opacity:1}100%{right:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left{-webkit-animation:notify-animation-from-left .3s ease-in-out 0s normal;animation:notify-animation-from-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}@keyframes notify-animation-from-left{0%{left:-300px;opacity:0}50%{left:8px;opacity:1}100%{left:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top{-webkit-animation:notify-animation-from-top .3s ease-in-out 0s normal;animation:notify-animation-from-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}@keyframes notify-animation-from-top{0%{top:-50px;opacity:0}50%{top:8px;opacity:1}100%{top:0;opacity:1}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom{-webkit-animation:notify-animation-from-bottom .3s ease-in-out 0s normal;animation:notify-animation-from-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}@keyframes notify-animation-from-bottom{0%{bottom:-50px;opacity:0}50%{bottom:8px;opacity:1}100%{bottom:0;opacity:1}}[id^=NotiflixNotifyOverlay].nx-with-animation.nx-remove,[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-fade.nx-remove{opacity:0;-webkit-animation:notify-remove-fade .3s ease-in-out 0s normal;animation:notify-remove-fade .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}@keyframes notify-remove-fade{0%{opacity:1}100%{opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-zoom.nx-remove{-webkit-transform:scale(0);transform:scale(0);-webkit-animation:notify-remove-zoom .3s ease-in-out 0s normal;animation:notify-remove-zoom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}@keyframes notify-remove-zoom{0%{-webkit-transform:scale(1);transform:scale(1)}50%{-webkit-transform:scale(1.05);transform:scale(1.05)}100%{-webkit-transform:scale(0);transform:scale(0)}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-top.nx-remove{opacity:0;-webkit-animation:notify-remove-to-top .3s ease-in-out 0s normal;animation:notify-remove-to-top .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}@keyframes notify-remove-to-top{0%{top:0;opacity:1}50%{top:8px;opacity:1}100%{top:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-right.nx-remove{opacity:0;-webkit-animation:notify-remove-to-right .3s ease-in-out 0s normal;animation:notify-remove-to-right .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}@keyframes notify-remove-to-right{0%{right:0;opacity:1}50%{right:8px;opacity:1}100%{right:-300px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-bottom.nx-remove{opacity:0;-webkit-animation:notify-remove-to-bottom .3s ease-in-out 0s normal;animation:notify-remove-to-bottom .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}@keyframes notify-remove-to-bottom{0%{bottom:0;opacity:1}50%{bottom:8px;opacity:1}100%{bottom:-50px;opacity:0}}[id^=NotiflixNotifyWrap]>div.nx-with-animation.nx-from-left.nx-remove{opacity:0;-webkit-animation:notify-remove-to-left .3s ease-in-out 0s normal;animation:notify-remove-to-left .3s ease-in-out 0s normal}@-webkit-keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}@keyframes notify-remove-to-left{0%{left:0;opacity:1}50%{left:8px;opacity:1}100%{left:-300px;opacity:0}}'},V=0,$=function(f,m,y,I){if(!C("body"))return!1;t||me.Notify.init({});var P=N(!0,t,{});if(typeof y=="object"&&!Array.isArray(y)||typeof I=="object"&&!Array.isArray(I)){var z={};typeof y=="object"?z=y:typeof I=="object"&&(z=I),t=N(!0,t,z)}var O=t[f.toLocaleLowerCase("en")];V++,typeof m!="string"&&(m="Notiflix "+f),t.plainText&&(m=U(m)),!t.plainText&&m.length>t.messageMaxLength&&(t=N(!0,t,{closeButton:!0,messageMaxLength:150}),m='Possible HTML Tags Error: The "plainText" option is "false" and the notification content length is more than the "messageMaxLength" option.'),m.length>t.messageMaxLength&&(m=m.substring(0,t.messageMaxLength)+"..."),t.fontAwesomeIconStyle==="shadow"&&(O.fontAwesomeIconColor=O.background),t.cssAnimation||(t.cssAnimationDuration=0);var k=e.document.getElementById(u.wrapID)||e.document.createElement("div");if(k.id=u.wrapID,k.style.width=t.width,k.style.zIndex=t.zindex,k.style.opacity=t.opacity,t.position==="center-center"?(k.style.left=t.distance,k.style.top=t.distance,k.style.right=t.distance,k.style.bottom=t.distance,k.style.margin="auto",k.classList.add("nx-flex-center-center"),k.style.maxHeight="calc((100vh - "+t.distance+") - "+t.distance+")",k.style.display="flex",k.style.flexWrap="wrap",k.style.flexDirection="column",k.style.justifyContent="center",k.style.alignItems="center",k.style.pointerEvents="none"):t.position==="center-top"?(k.style.left=t.distance,k.style.right=t.distance,k.style.top=t.distance,k.style.bottom="auto",k.style.margin="auto"):t.position==="center-bottom"?(k.style.left=t.distance,k.style.right=t.distance,k.style.bottom=t.distance,k.style.top="auto",k.style.margin="auto"):t.position==="right-bottom"?(k.style.right=t.distance,k.style.bottom=t.distance,k.style.top="auto",k.style.left="auto"):t.position==="left-top"?(k.style.left=t.distance,k.style.top=t.distance,k.style.right="auto",k.style.bottom="auto"):t.position==="left-bottom"?(k.style.left=t.distance,k.style.bottom=t.distance,k.style.top="auto",k.style.right="auto"):(k.style.right=t.distance,k.style.top=t.distance,k.style.left="auto",k.style.bottom="auto"),t.backOverlay){var j=e.document.getElementById(u.overlayID)||e.document.createElement("div");j.id=u.overlayID,j.style.width="100%",j.style.height="100%",j.style.position="fixed",j.style.zIndex=t.zindex-1,j.style.left=0,j.style.top=0,j.style.right=0,j.style.bottom=0,j.style.background=O.backOverlayColor||t.backOverlayColor,j.className=t.cssAnimation?"nx-with-animation":"",j.style.animationDuration=t.cssAnimation?t.cssAnimationDuration+"ms":"",e.document.getElementById(u.overlayID)||e.document.body.appendChild(j)}e.document.getElementById(u.wrapID)||e.document.body.appendChild(k);var S=e.document.createElement("div");S.id=t.ID+"-"+V,S.className=t.className+" "+O.childClassName+" "+(t.cssAnimation?"nx-with-animation":"")+" "+(t.useIcon?"nx-with-icon":"")+" nx-"+t.cssAnimationStyle+" "+(t.closeButton&&typeof y!="function"?"nx-with-close-button":"")+" "+(typeof y=="function"?"nx-with-callback":"")+" "+(t.clickToClose?"nx-notify-click-to-close":""),S.style.fontSize=t.fontSize,S.style.color=O.textColor,S.style.background=O.background,S.style.borderRadius=t.borderRadius,S.style.pointerEvents="all",t.rtl&&(S.setAttribute("dir","rtl"),S.classList.add("nx-rtl-on")),S.style.fontFamily='"'+t.fontFamily+'", '+c,t.cssAnimation&&(S.style.animationDuration=t.cssAnimationDuration+"ms");var Q="";if(t.closeButton&&typeof y!="function"&&(Q='<span class="nx-close-button"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><g><path fill="'+O.notiflixIconColor+'" d="M0.38 2.19l7.8 7.81 -7.8 7.81c-0.51,0.5 -0.51,1.31 -0.01,1.81 0.25,0.25 0.57,0.38 0.91,0.38 0.34,0 0.67,-0.14 0.91,-0.38l7.81 -7.81 7.81 7.81c0.24,0.24 0.57,0.38 0.91,0.38 0.34,0 0.66,-0.14 0.9,-0.38 0.51,-0.5 0.51,-1.31 0,-1.81l-7.81 -7.81 7.81 -7.81c0.51,-0.5 0.51,-1.31 0,-1.82 -0.5,-0.5 -1.31,-0.5 -1.81,0l-7.81 7.81 -7.81 -7.81c-0.5,-0.5 -1.31,-0.5 -1.81,0 -0.51,0.51 -0.51,1.32 0,1.82z"/></g></svg></span>'),!t.useIcon)S.innerHTML='<span class="nx-message">'+m+"</span>"+(t.closeButton?Q:"");else if(t.useFontAwesome)S.innerHTML='<i style="color:'+O.fontAwesomeIconColor+"; font-size:"+t.fontAwesomeIconSize+';" class="nx-message-icon nx-message-icon-fa '+O.fontAwesomeClassName+" "+(t.fontAwesomeIconStyle==="shadow"?"nx-message-icon-fa-shadow":"nx-message-icon-fa-basic")+'"></i><span class="nx-message nx-with-icon">'+m+"</span>"+(t.closeButton?Q:"");else{var se="";f===l.Success?se='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+O.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-2.4 -13.29l11.52 -12.96c0.37,-0.41 1.01,-0.45 1.42,-0.08 0.42,0.37 0.46,1 0.09,1.42l-12.16 13.67c-0.19,0.22 -0.46,0.34 -0.75,0.34 -0.23,0 -0.45,-0.07 -0.63,-0.22l-7.6 -6.07c-0.43,-0.35 -0.5,-0.99 -0.16,-1.42 0.35,-0.43 0.99,-0.5 1.42,-0.16l6.85 5.48z"/></g></svg>':f===l.Failure?se='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+O.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm1.42 -17.98l6.13 6.12c0.39,0.4 0.39,1.04 0,1.43 -0.19,0.19 -0.45,0.29 -0.71,0.29 -0.27,0 -0.53,-0.1 -0.72,-0.29l-6.12 -6.13 -6.13 6.13c-0.19,0.19 -0.44,0.29 -0.71,0.29 -0.27,0 -0.52,-0.1 -0.71,-0.29 -0.39,-0.39 -0.39,-1.03 0,-1.43l6.13 -6.12 -6.13 -6.13c-0.39,-0.39 -0.39,-1.03 0,-1.42 0.39,-0.39 1.03,-0.39 1.42,0l6.13 6.12 6.12 -6.12c0.4,-0.39 1.04,-0.39 1.43,0 0.39,0.39 0.39,1.03 0,1.42l-6.13 6.13z"/></g></svg>':f===l.Warning?se='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+O.notiflixIconColor+'" d="M21.91 3.48l17.8 30.89c0.84,1.46 -0.23,3.25 -1.91,3.25l-35.6 0c-1.68,0 -2.75,-1.79 -1.91,-3.25l17.8 -30.89c0.85,-1.47 2.97,-1.47 3.82,0zm16.15 31.84l-17.8 -30.89c-0.11,-0.2 -0.41,-0.2 -0.52,0l-17.8 30.89c-0.12,0.2 0.05,0.4 0.26,0.4l35.6 0c0.21,0 0.38,-0.2 0.26,-0.4zm-19.01 -4.12l0 -1.05c0,-0.53 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.42 0.95,0.95l0 1.05c0,0.53 -0.42,0.95 -0.95,0.95 -0.53,0 -0.95,-0.42 -0.95,-0.95zm0 -4.66l0 -13.39c0,-0.52 0.42,-0.95 0.95,-0.95 0.53,0 0.95,0.43 0.95,0.95l0 13.39c0,0.53 -0.42,0.96 -0.95,0.96 -0.53,0 -0.95,-0.43 -0.95,-0.96z"/></g></svg>':f===l.Info&&(se='<svg class="nx-message-icon" xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><g><path fill="'+O.notiflixIconColor+'" d="M20 0c11.03,0 20,8.97 20,20 0,11.03 -8.97,20 -20,20 -11.03,0 -20,-8.97 -20,-20 0,-11.03 8.97,-20 20,-20zm0 37.98c9.92,0 17.98,-8.06 17.98,-17.98 0,-9.92 -8.06,-17.98 -17.98,-17.98 -9.92,0 -17.98,8.06 -17.98,17.98 0,9.92 8.06,17.98 17.98,17.98zm-0.99 -23.3c0,-0.54 0.44,-0.98 0.99,-0.98 0.55,0 0.99,0.44 0.99,0.98l0 15.86c0,0.55 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.44 -0.99,-0.99l0 -15.86zm0 -5.22c0,-0.55 0.44,-0.99 0.99,-0.99 0.55,0 0.99,0.44 0.99,0.99l0 1.09c0,0.54 -0.44,0.99 -0.99,0.99 -0.55,0 -0.99,-0.45 -0.99,-0.99l0 -1.09z"/></g></svg>'),S.innerHTML=se+'<span class="nx-message nx-with-icon">'+m+"</span>"+(t.closeButton?Q:"")}if(t.position==="left-bottom"||t.position==="right-bottom"){var re=e.document.getElementById(u.wrapID);re.insertBefore(S,re.firstChild)}else e.document.getElementById(u.wrapID).appendChild(S);var ne=e.document.getElementById(S.id);if(ne){var G,oe,q=function(){ne.classList.add("nx-remove");var D=e.document.getElementById(u.overlayID);D&&0>=k.childElementCount&&D.classList.add("nx-remove"),clearTimeout(G)},ke=function(){if(ne&&ne.parentNode!==null&&ne.parentNode.removeChild(ne),0>=k.childElementCount&&k.parentNode!==null){k.parentNode.removeChild(k);var D=e.document.getElementById(u.overlayID);D&&D.parentNode!==null&&D.parentNode.removeChild(D)}clearTimeout(oe)};if(t.closeButton&&typeof y!="function"){var Ce=e.document.getElementById(S.id).querySelector("span.nx-close-button");Ce.addEventListener("click",function(){q();var D=setTimeout(function(){ke(),clearTimeout(D)},t.cssAnimationDuration)})}if((typeof y=="function"||t.clickToClose)&&ne.addEventListener("click",function(){typeof y=="function"&&y(),q();var D=setTimeout(function(){ke(),clearTimeout(D)},t.cssAnimationDuration)}),!t.closeButton&&typeof y!="function"){var ge=function(){G=setTimeout(function(){q()},t.timeout),oe=setTimeout(function(){ke()},t.timeout+t.cssAnimationDuration)};ge(),t.pauseOnHover&&(ne.addEventListener("mouseenter",function(){ne.classList.add("nx-paused"),clearTimeout(G),clearTimeout(oe)}),ne.addEventListener("mouseleave",function(){ne.classList.remove("nx-paused"),ge()}))}}if(t.showOnlyTheLastOne&&0<V)for(var _e,ee=e.document.querySelectorAll("[id^="+t.ID+"-]:not([id="+t.ID+"-"+V+"])"),ze=0;ze<ee.length;ze++)_e=ee[ze],_e.parentNode!==null&&_e.parentNode.removeChild(_e);t=N(!0,t,P)},te=function(){return'[id^=NotiflixReportWrap]{position:fixed;z-index:4002;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;left:0;top:0;padding:10px;color:#1e1e1e;border-radius:25px;background:transparent;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixReportWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixReportWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixReportWrap]>div.nx-report-click-to-close{cursor:pointer}[id^=NotiflixReportWrap]>div[class*="-content"]{width:320px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:inherit;padding:10px;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));border:1px solid rgba(0,0,0,.03);background:#f8f8f8;position:relative;z-index:1}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:110px;height:110px;display:block;margin:6px auto 12px}[id^=NotiflixReportWrap]>div[class*="-content"]>div[class$="-icon"] svg{min-width:100%;max-width:100%;height:auto}[id^=NotiflixReportWrap]>*>h5{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:16px;font-weight:500;line-height:1.4;margin:0 0 10px;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);float:left;width:100%;text-align:center}[id^=NotiflixReportWrap]>*>p{word-break:break-all;word-break:break-word;font-family:inherit!important;font-size:13px;line-height:1.4;font-weight:normal;float:left;width:100%;padding:0 10px;margin:0 0 10px}[id^=NotiflixReportWrap] a#NXReportButton{word-break:break-all;word-break:break-word;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;cursor:pointer;float:right;padding:7px 17px;background:#32c682;font-size:14px;line-height:1.4;font-weight:500;border-radius:inherit!important;color:#fff}[id^=NotiflixReportWrap] a#NXReportButton:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixReportWrap].nx-rtl-on a#NXReportButton{float:left}[id^=NotiflixReportWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:report-overlay-animation .3s ease-in-out 0s normal;animation:report-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes report-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-fade{-webkit-animation:report-animation-fade .3s ease-in-out 0s normal;animation:report-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes report-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixReportWrap]>div[class*="-content"].nx-with-animation.nx-zoom{-webkit-animation:report-animation-zoom .3s ease-in-out 0s normal;animation:report-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes report-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixReportWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:report-overlay-animation-remove .3s ease-in-out 0s normal;animation:report-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-fade{opacity:0;-webkit-animation:report-animation-fade-remove .3s ease-in-out 0s normal;animation:report-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes report-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixReportWrap].nx-remove>div[class*="-content"].nx-with-animation.nx-zoom{opacity:0;-webkit-animation:report-animation-zoom-remove .3s ease-in-out 0s normal;animation:report-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes report-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},de=function(f,m,y,I,P,z){if(!C("body"))return!1;i||me.Report.init({});var O={};if(typeof P=="object"&&!Array.isArray(P)||typeof z=="object"&&!Array.isArray(z)){var k={};typeof P=="object"?k=P:typeof z=="object"&&(k=z),O=N(!0,i,{}),i=N(!0,i,k)}var j=i[f.toLocaleLowerCase("en")];typeof m!="string"&&(m="Notiflix "+f),typeof y!="string"&&(f===d.Success?y='"Do not try to become a person of success but try to become a person of value." <br><br>- Albert Einstein':f===d.Failure?y='"Failure is simply the opportunity to begin again, this time more intelligently." <br><br>- Henry Ford':f===d.Warning?y='"The peoples who want to live comfortably without producing and fatigue; they are doomed to lose their dignity, then liberty, and then independence and destiny." <br><br>- Mustafa Kemal Ataturk':f===d.Info&&(y='"Knowledge rests not upon truth alone, but upon error also." <br><br>- Carl Gustav Jung')),typeof I!="string"&&(I="Okay"),i.plainText&&(m=U(m),y=U(y),I=U(I)),i.plainText||(m.length>i.titleMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the title content length is more than the "titleMaxLength" option.',I="Okay"),y.length>i.messageMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the message content length is more than the "messageMaxLength" option.',I="Okay"),I.length>i.buttonMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the button content length is more than the "buttonMaxLength" option.',I="Okay")),m.length>i.titleMaxLength&&(m=m.substring(0,i.titleMaxLength)+"..."),y.length>i.messageMaxLength&&(y=y.substring(0,i.messageMaxLength)+"..."),I.length>i.buttonMaxLength&&(I=I.substring(0,i.buttonMaxLength)+"..."),i.cssAnimation||(i.cssAnimationDuration=0);var S=e.document.createElement("div");S.id=g.ID,S.className=i.className,S.style.zIndex=i.zindex,S.style.borderRadius=i.borderRadius,S.style.fontFamily='"'+i.fontFamily+'", '+c,i.rtl&&(S.setAttribute("dir","rtl"),S.classList.add("nx-rtl-on")),S.style.display="flex",S.style.flexWrap="wrap",S.style.flexDirection="column",S.style.alignItems="center",S.style.justifyContent="center";var Q="",se=i.backOverlayClickToClose===!0;i.backOverlay&&(Q='<div class="'+i.className+"-overlay"+(i.cssAnimation?" nx-with-animation":"")+(se?" nx-report-click-to-close":"")+'" style="background:'+(j.backOverlayColor||i.backOverlayColor)+";animation-duration:"+i.cssAnimationDuration+'ms;"></div>');var re="";if(f===d.Success?re=Se(i.svgSize,j.svgColor):f===d.Failure?re=Nn(i.svgSize,j.svgColor):f===d.Warning?re=En(i.svgSize,j.svgColor):f===d.Info&&(re=In(i.svgSize,j.svgColor)),S.innerHTML=Q+'<div class="'+i.className+"-content"+(i.cssAnimation?" nx-with-animation ":"")+" nx-"+i.cssAnimationStyle+'" style="width:'+i.width+"; background:"+i.backgroundColor+"; animation-duration:"+i.cssAnimationDuration+'ms;"><div style="width:'+i.svgSize+"; height:"+i.svgSize+';" class="'+i.className+'-icon">'+re+'</div><h5 class="'+i.className+'-title" style="font-weight:500; font-size:'+i.titleFontSize+"; color:"+j.titleColor+';">'+m+'</h5><p class="'+i.className+'-message" style="font-size:'+i.messageFontSize+"; color:"+j.messageColor+';">'+y+'</p><a id="NXReportButton" class="'+i.className+'-button" style="font-weight:500; font-size:'+i.buttonFontSize+"; background:"+j.buttonBackground+"; color:"+j.buttonColor+';">'+I+"</a></div>",!e.document.getElementById(S.id)){e.document.body.appendChild(S);var ne=function(){var q=e.document.getElementById(S.id);q.classList.add("nx-remove");var ke=setTimeout(function(){q.parentNode!==null&&q.parentNode.removeChild(q),clearTimeout(ke)},i.cssAnimationDuration)},G=e.document.getElementById("NXReportButton");if(G.addEventListener("click",function(){typeof P=="function"&&P(),ne()}),Q&&se){var oe=e.document.querySelector(".nx-report-click-to-close");oe.addEventListener("click",function(){ne()})}}i=N(!0,i,O)},Fe=function(){return'[id^=NotiflixConfirmWrap]{position:fixed;z-index:4003;width:100%;height:100%;left:0;top:0;padding:10px;-webkit-box-sizing:border-box;box-sizing:border-box;background:transparent;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixConfirmWrap].nx-position-center-top{-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-center-bottom{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-left-top{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-center{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start}[id^=NotiflixConfirmWrap].nx-position-left-bottom{-webkit-box-align:start;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-top{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start}[id^=NotiflixConfirmWrap].nx-position-right-center{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end}[id^=NotiflixConfirmWrap].nx-position-right-bottom{-webkit-box-align:end;-webkit-align-items:flex-end;-ms-flex-align:end;align-items:flex-end;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end}[id^=NotiflixConfirmWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixConfirmWrap]>div[class*="-overlay"]{width:100%;height:100%;left:0;top:0;background:rgba(255,255,255,.5);position:fixed;z-index:0}[id^=NotiflixConfirmWrap]>div[class*="-overlay"].nx-with-animation{-webkit-animation:confirm-overlay-animation .3s ease-in-out 0s normal;animation:confirm-overlay-animation .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}@keyframes confirm-overlay-animation{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-remove>div[class*="-overlay"].nx-with-animation{opacity:0;-webkit-animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal;animation:confirm-overlay-animation-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-overlay-animation-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap]>div[class*="-content"]{width:300px;max-width:100%;max-height:96vh;overflow-x:hidden;overflow-y:auto;border-radius:25px;padding:10px;margin:0;-webkit-filter:drop-shadow(0 0 5px rgba(0,0,0,0.05));filter:drop-shadow(0 0 5px rgba(0, 0, 0, .05));background:#f8f8f8;color:#1e1e1e;position:relative;z-index:1;text-align:center}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar{width:0;height:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-thumb{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]::-webkit-scrollbar-track{background:transparent}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]{float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>h5{float:left;width:100%;margin:0;padding:0 0 10px;border-bottom:1px solid rgba(0,0,0,.1);color:#32c682;font-family:inherit!important;font-size:16px;line-height:1.4;font-weight:500;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div{font-family:inherit!important;margin:15px 0 20px;padding:0 10px;float:left;width:100%;font-size:14px;line-height:1.4;font-weight:normal;color:inherit;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div{font-family:inherit!important;float:left;width:100%;margin:15px 0 0;padding:0}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input{font-family:inherit!important;float:left;width:100%;height:40px;margin:0;padding:0 15px;border:1px solid rgba(0,0,0,.1);border-radius:25px;font-size:14px;font-weight:normal;line-height:1;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;text-align:left}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-head"]>div>div>input{text-align:right}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:hover{border-color:rgba(0,0,0,.1)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input:focus{border-color:rgba(0,0,0,.3)}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-failure{border-color:#ff5549}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-head"]>div>div>input.nx-validation-success{border-color:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:inherit;float:left;width:100%;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a{cursor:pointer;font-family:inherit!important;-webkit-transition:all .25s ease-in-out;-o-transition:all .25s ease-in-out;transition:all .25s ease-in-out;float:left;width:48%;padding:9px 5px;border-radius:inherit!important;font-weight:500;font-size:15px;line-height:1.4;color:#f8f8f8;text-align:inherit}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-ok{margin:0 2% 0 0;background:#32c682}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-confirm-button-cancel{margin:0 0 0 2%;background:#a9a9a9}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a.nx-full{margin:0;width:100%}[id^=NotiflixConfirmWrap]>div[class*="-content"]>div[class*="-buttons"]>a:hover{-webkit-box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25);box-shadow:inset 0 -60px 5px -5px rgba(0,0,0,.25)}[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"],[id^=NotiflixConfirmWrap].nx-rtl-on>div[class*="-content"]>div[class*="-buttons"]>a{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade>div[class*="-content"]{-webkit-animation:confirm-animation-fade .3s ease-in-out 0s normal;animation:confirm-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes confirm-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom>div[class*="-content"]{-webkit-animation:confirm-animation-zoom .3s ease-in-out 0s normal;animation:confirm-animation-zoom .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes confirm-animation-zoom{0%{opacity:0;-webkit-transform:scale(.5);transform:scale(.5)}50%{opacity:1;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-fade.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-fade-remove .3s ease-in-out 0s normal;animation:confirm-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes confirm-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixConfirmWrap].nx-with-animation.nx-zoom.nx-remove>div[class*="-content"]{opacity:0;-webkit-animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal;animation:confirm-animation-zoom-remove .3s ease-in-out 0s normal}@-webkit-keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}@keyframes confirm-animation-zoom-remove{0%{opacity:1;-webkit-transform:scale(1);transform:scale(1)}50%{opacity:.5;-webkit-transform:scale(1.05);transform:scale(1.05)}100%{opacity:0;-webkit-transform:scale(0);transform:scale(0)}}'},Tn=function(f,m,y,I,P,z,O,k,j){if(!C("body"))return!1;s||me.Confirm.init({});var S=N(!0,s,{});typeof j!="object"||Array.isArray(j)||(s=N(!0,s,j)),typeof m!="string"&&(m="Notiflix Confirm"),typeof y!="string"&&(y="Do you agree with me?"),typeof P!="string"&&(P="Yes"),typeof z!="string"&&(z="No"),typeof O!="function"&&(O=void 0),typeof k!="function"&&(k=void 0),s.plainText&&(m=U(m),y=U(y),P=U(P),z=U(z)),s.plainText||(m.length>s.titleMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the title content length is more than "titleMaxLength" option.',P="Okay",z="..."),y.length>s.messageMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the message content length is more than "messageMaxLength" option.',P="Okay",z="..."),(P.length||z.length)>s.buttonsMaxLength&&(m="Possible HTML Tags Error",y='The "plainText" option is "false" and the buttons content length is more than "buttonsMaxLength" option.',P="Okay",z="...")),m.length>s.titleMaxLength&&(m=m.substring(0,s.titleMaxLength)+"..."),y.length>s.messageMaxLength&&(y=y.substring(0,s.messageMaxLength)+"..."),P.length>s.buttonsMaxLength&&(P=P.substring(0,s.buttonsMaxLength)+"..."),z.length>s.buttonsMaxLength&&(z=z.substring(0,s.buttonsMaxLength)+"..."),s.cssAnimation||(s.cssAnimationDuration=0);var Q=e.document.createElement("div");Q.id=h.ID,Q.className=s.className+(s.cssAnimation?" nx-with-animation nx-"+s.cssAnimationStyle:""),Q.style.zIndex=s.zindex,Q.style.padding=s.distance,s.rtl&&(Q.setAttribute("dir","rtl"),Q.classList.add("nx-rtl-on"));var se=typeof s.position=="string"?s.position.trim():"center";Q.classList.add("nx-position-"+se),Q.style.fontFamily='"'+s.fontFamily+'", '+c;var re="";s.backOverlay&&(re='<div class="'+s.className+"-overlay"+(s.cssAnimation?" nx-with-animation":"")+'" style="background:'+s.backOverlayColor+";animation-duration:"+s.cssAnimationDuration+'ms;"></div>');var ne="";typeof O=="function"&&(ne='<a id="NXConfirmButtonCancel" class="nx-confirm-button-cancel" style="color:'+s.cancelButtonColor+";background:"+s.cancelButtonBackground+";font-size:"+s.buttonsFontSize+';">'+z+"</a>");var G="",oe=null,q=void 0;if(f===p.Ask||f===p.Prompt){oe=I||"";var ke=f===p.Ask||200<oe.length?Math.ceil(1.5*oe.length):250,Ce=f===p.Prompt?'value="'+oe+'"':"";G='<div><input id="NXConfirmValidationInput" type="text" '+Ce+' maxlength="'+ke+'" style="font-size:'+s.messageFontSize+";border-radius: "+s.borderRadius+';" autocomplete="off" spellcheck="false" autocapitalize="none" /></div>'}if(Q.innerHTML=re+'<div class="'+s.className+'-content" style="width:'+s.width+"; background:"+s.backgroundColor+"; animation-duration:"+s.cssAnimationDuration+"ms; border-radius: "+s.borderRadius+';"><div class="'+s.className+'-head"><h5 style="color:'+s.titleColor+";font-size:"+s.titleFontSize+';">'+m+'</h5><div style="color:'+s.messageColor+";font-size:"+s.messageFontSize+';">'+y+G+'</div></div><div class="'+s.className+'-buttons"><a id="NXConfirmButtonOk" class="nx-confirm-button-ok'+(typeof O=="function"?"":" nx-full")+'" style="color:'+s.okButtonColor+";background:"+s.okButtonBackground+";font-size:"+s.buttonsFontSize+';">'+P+"</a>"+ne+"</div></div>",!e.document.getElementById(Q.id)){e.document.body.appendChild(Q);var ge=e.document.getElementById(Q.id),_e=e.document.getElementById("NXConfirmButtonOk"),ee=e.document.getElementById("NXConfirmValidationInput");if(ee&&(ee.focus(),ee.setSelectionRange(0,(ee.value||"").length),ee.addEventListener("keyup",function(D){var st=D.target.value;if(f===p.Ask&&st!==oe)D.preventDefault(),ee.classList.add("nx-validation-failure"),ee.classList.remove("nx-validation-success");else{f===p.Ask&&(ee.classList.remove("nx-validation-failure"),ee.classList.add("nx-validation-success"));var vt=(D.key||"").toLocaleLowerCase("en")==="enter"||D.keyCode===13;vt&&_e.dispatchEvent(new Event("click"))}})),_e.addEventListener("click",function(D){if(f===p.Ask&&oe&&ee){var st=(ee.value||"").toString();if(st!==oe)return ee.focus(),ee.classList.add("nx-validation-failure"),D.stopPropagation(),D.preventDefault(),D.returnValue=!1,D.cancelBubble=!0,!1;ee.classList.remove("nx-validation-failure")}typeof O=="function"&&(f===p.Prompt&&ee&&(q=ee.value||""),O(q)),ge.classList.add("nx-remove");var vt=setTimeout(function(){ge.parentNode!==null&&(ge.parentNode.removeChild(ge),clearTimeout(vt))},s.cssAnimationDuration)}),typeof O=="function"){var ze=e.document.getElementById("NXConfirmButtonCancel");ze.addEventListener("click",function(){typeof k=="function"&&(f===p.Prompt&&ee&&(q=ee.value||""),k(q)),ge.classList.add("nx-remove");var D=setTimeout(function(){ge.parentNode!==null&&(ge.parentNode.removeChild(ge),clearTimeout(D))},s.cssAnimationDuration)})}}s=N(!0,s,S)},Qo=function(){return'[id^=NotiflixLoadingWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;z-index:4000;width:100%;height:100%;left:0;top:0;right:0;bottom:0;margin:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.8);font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}[id^=NotiflixLoadingWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixLoadingWrap].nx-loading-click-to-close{cursor:pointer}[id^=NotiflixLoadingWrap]>div[class*="-icon"]{width:60px;height:60px;position:relative;-webkit-transition:top .2s ease-in-out;-o-transition:top .2s ease-in-out;transition:top .2s ease-in-out;margin:0 auto}[id^=NotiflixLoadingWrap]>div[class*="-icon"] img,[id^=NotiflixLoadingWrap]>div[class*="-icon"] svg{max-width:unset;max-height:unset;width:100%;height:auto;position:absolute;left:0;top:0}[id^=NotiflixLoadingWrap]>p{position:relative;margin:10px auto 0;font-family:inherit!important;font-weight:normal;font-size:15px;line-height:1.4;padding:0 10px;width:100%;text-align:center}[id^=NotiflixLoadingWrap].nx-with-animation{-webkit-animation:loading-animation-fade .3s ease-in-out 0s normal;animation:loading-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixLoadingWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:loading-animation-fade-remove .3s ease-in-out 0s normal;animation:loading-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixLoadingWrap]>p.nx-loading-message-new{-webkit-animation:loading-new-message-fade .3s ease-in-out 0s normal;animation:loading-new-message-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}'},Pe=function(f,m,y,I,P){if(!C("body"))return!1;o||me.Loading.init({});var z=N(!0,o,{});if(typeof m=="object"&&!Array.isArray(m)||typeof y=="object"&&!Array.isArray(y)){var O={};typeof m=="object"?O=m:typeof y=="object"&&(O=y),o=N(!0,o,O)}var k="";if(typeof m=="string"&&0<m.length&&(k=m),I){k=k.length>o.messageMaxLength?U(k).toString().substring(0,o.messageMaxLength)+"...":U(k).toString();var j="";0<k.length&&(j='<p id="'+o.messageID+'" class="nx-loading-message" style="color:'+o.messageColor+";font-size:"+o.messageFontSize+';">'+k+"</p>"),o.cssAnimation||(o.cssAnimationDuration=0);var S="";if(f===_.Standard)S=je(o.svgSize,o.svgColor);else if(f===_.Hourglass)S=Gt(o.svgSize,o.svgColor);else if(f===_.Circle)S=Ge(o.svgSize,o.svgColor);else if(f===_.Arrows)S=qt(o.svgSize,o.svgColor);else if(f===_.Dots)S=E(o.svgSize,o.svgColor);else if(f===_.Pulse)S=M(o.svgSize,o.svgColor);else if(f===_.Custom&&o.customSvgCode!==null&&o.customSvgUrl===null)S=o.customSvgCode||"";else if(f===_.Custom&&o.customSvgUrl!==null&&o.customSvgCode===null)S='<img class="nx-custom-loading-icon" width="'+o.svgSize+'" height="'+o.svgSize+'" src="'+o.customSvgUrl+'" alt="Notiflix">';else{if(f===_.Custom&&(o.customSvgUrl===null||o.customSvgCode===null))return B('You have to set a static SVG url to "customSvgUrl" option to use Loading Custom.'),!1;S=L(o.svgSize,"#f8f8f8","#32c682")}var Q=parseInt((o.svgSize||"").replace(/[^0-9]/g,"")),se=e.innerWidth,re=Q>=se?se-40+"px":Q+"px",ne='<div style="width:'+re+"; height:"+re+';" class="'+o.className+"-icon"+(0<k.length?" nx-with-message":"")+'">'+S+"</div>",G=e.document.createElement("div");if(G.id=x.ID,G.className=o.className+(o.cssAnimation?" nx-with-animation":"")+(o.clickToClose?" nx-loading-click-to-close":""),G.style.zIndex=o.zindex,G.style.background=o.backgroundColor,G.style.animationDuration=o.cssAnimationDuration+"ms",G.style.fontFamily='"'+o.fontFamily+'", '+c,G.style.display="flex",G.style.flexWrap="wrap",G.style.flexDirection="column",G.style.alignItems="center",G.style.justifyContent="center",o.rtl&&(G.setAttribute("dir","rtl"),G.classList.add("nx-rtl-on")),G.innerHTML=ne+j,!e.document.getElementById(G.id)&&(e.document.body.appendChild(G),o.clickToClose)){var oe=e.document.getElementById(G.id);oe.addEventListener("click",function(){G.classList.add("nx-remove");var Ce=setTimeout(function(){G.parentNode!==null&&(G.parentNode.removeChild(G),clearTimeout(Ce))},o.cssAnimationDuration)})}}else if(e.document.getElementById(x.ID))var q=e.document.getElementById(x.ID),ke=setTimeout(function(){q.classList.add("nx-remove");var Ce=setTimeout(function(){q.parentNode!==null&&(q.parentNode.removeChild(q),clearTimeout(Ce))},o.cssAnimationDuration);clearTimeout(ke)},P);o=N(!0,o,z)},Ko=function(f){typeof f!="string"&&(f="");var m=e.document.getElementById(x.ID);if(m)if(0<f.length){f=f.length>o.messageMaxLength?U(f).substring(0,o.messageMaxLength)+"...":U(f);var y=m.getElementsByTagName("p")[0];if(y)y.innerHTML=f;else{var I=e.document.createElement("p");I.id=o.messageID,I.className="nx-loading-message nx-loading-message-new",I.style.color=o.messageColor,I.style.fontSize=o.messageFontSize,I.innerHTML=f,m.appendChild(I)}}else B("Where is the new message?")},Jo=function(){return'[id^=NotiflixBlockWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1000;font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background:rgba(255,255,255,.9);text-align:center;animation-duration:.4s;width:100%;height:100%;left:0;top:0;border-radius:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}[id^=NotiflixBlockWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixBlockWrap]>span[class*="-icon"]{display:block;width:45px;height:45px;position:relative;margin:0 auto}[id^=NotiflixBlockWrap]>span[class*="-icon"] svg{width:inherit;height:inherit}[id^=NotiflixBlockWrap]>span[class*="-message"]{position:relative;display:block;width:100%;margin:10px auto 0;padding:0 10px;font-family:inherit!important;font-weight:normal;font-size:14px;line-height:1.4}[id^=NotiflixBlockWrap].nx-with-animation{-webkit-animation:block-animation-fade .3s ease-in-out 0s normal;animation:block-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes block-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixBlockWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:block-animation-fade-remove .3s ease-in-out 0s normal;animation:block-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes block-animation-fade-remove{0%{opacity:1}100%{opacity:0}}'},Sn=0,qe=function(f,m,y,I,P,z){var O;if(Array.isArray(y)){if(1>y.length)return B("Array of HTMLElements should contains at least one HTMLElement."),!1;O=y}else if(Object.prototype.isPrototypeOf.call(NodeList.prototype,y)){if(1>y.length)return B("NodeListOf<HTMLElement> should contains at least one HTMLElement."),!1;O=Array.prototype.slice.call(y)}else{var k=typeof y!="string"||1>(y||"").length||(y||"").length===1&&((y||"")[0]==="#"||(y||"")[0]===".");if(k)return B("The selector parameter must be a string and matches a specified CSS selector(s)."),!1;var j=e.document.querySelectorAll(y);if(1>j.length)return B('You called the "Notiflix.Block..." function with "'+y+'" selector, but there is no such element(s) in the document.'),!1;O=j}r||me.Block.init({});var S=N(!0,r,{});if(typeof I=="object"&&!Array.isArray(I)||typeof P=="object"&&!Array.isArray(P)){var Q={};typeof I=="object"?Q=I:typeof P=="object"&&(Q=P),r=N(!0,r,Q)}var se="";typeof I=="string"&&0<I.length&&(se=I),r.cssAnimation||(r.cssAnimationDuration=0);var re=T.className;typeof r.className=="string"&&(re=r.className.trim());var ne=typeof r.querySelectorLimit=="number"?r.querySelectorLimit:200,G=(O||[]).length>=ne?ne:O.length,oe="nx-block-temporary-position";if(f){for(var q,ke=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","html","head","title","script","style","iframe"],Ce=0;Ce<G;Ce++)if(q=O[Ce],q){if(-1<ke.indexOf(q.tagName.toLocaleLowerCase("en")))break;var ge=q.querySelectorAll("[id^="+T.ID+"]");if(1>ge.length){var _e="";m&&(m===b.Hourglass?_e=Gt(r.svgSize,r.svgColor):m===b.Circle?_e=Ge(r.svgSize,r.svgColor):m===b.Arrows?_e=qt(r.svgSize,r.svgColor):m===b.Dots?_e=E(r.svgSize,r.svgColor):m===b.Pulse?_e=M(r.svgSize,r.svgColor):_e=je(r.svgSize,r.svgColor));var ee='<span class="'+re+'-icon" style="width:'+r.svgSize+";height:"+r.svgSize+';">'+_e+"</span>",ze="";0<se.length&&(se=se.length>r.messageMaxLength?U(se).substring(0,r.messageMaxLength)+"...":U(se),ze='<span style="font-size:'+r.messageFontSize+";color:"+r.messageColor+';" class="'+re+'-message">'+se+"</span>"),Sn++;var D=e.document.createElement("div");D.id=T.ID+"-"+Sn,D.className=re+(r.cssAnimation?" nx-with-animation":""),D.style.position=r.position,D.style.zIndex=r.zindex,D.style.background=r.backgroundColor,D.style.animationDuration=r.cssAnimationDuration+"ms",D.style.fontFamily='"'+r.fontFamily+'", '+c,D.style.display="flex",D.style.flexWrap="wrap",D.style.flexDirection="column",D.style.alignItems="center",D.style.justifyContent="center",r.rtl&&(D.setAttribute("dir","rtl"),D.classList.add("nx-rtl-on")),D.innerHTML=ee+ze;var st=e.getComputedStyle(q).getPropertyValue("position"),vt=typeof st=="string"?st.toLocaleLowerCase("en"):"relative",Di=Math.round(1.25*parseInt(r.svgSize))+40,Zo=q.offsetHeight||0,Rn="";Di>Zo&&(Rn="min-height:"+Di+"px;");var Fi="";Fi=q.getAttribute("id")?"#"+q.getAttribute("id"):q.classList[0]?"."+q.classList[0]:(q.tagName||"").toLocaleLowerCase("en");var zi="",Wi=-1>=["absolute","relative","fixed","sticky"].indexOf(vt);if(Wi||0<Rn.length){if(!C("head"))return!1;Wi&&(zi="position:relative!important;");var er='<style id="Style-'+T.ID+"-"+Sn+'">'+Fi+"."+oe+"{"+zi+Rn+"}</style>",Bi=e.document.createRange();Bi.selectNode(e.document.head);var tr=Bi.createContextualFragment(er);e.document.head.appendChild(tr),q.classList.add(oe)}q.appendChild(D)}}}else var nr=function(he){var we=setTimeout(function(){he.parentNode!==null&&he.parentNode.removeChild(he);var bt=he.getAttribute("id"),Yt=e.document.getElementById("Style-"+bt);Yt&&Yt.parentNode!==null&&Yt.parentNode.removeChild(Yt),clearTimeout(we)},r.cssAnimationDuration)},ir=function(he){if(he&&0<he.length)for(var we,bt=0;bt<he.length;bt++)we=he[bt],we&&(we.classList.add("nx-remove"),nr(we));else w(typeof y=="string"?'"Notiflix.Block.remove();" function called with "'+y+'" selector, but this selector does not have a "Block" element to remove.':'"Notiflix.Block.remove();" function called with "'+y+'", but this "Array<HTMLElement>" or "NodeListOf<HTMLElement>" does not have a "Block" element to remove.')},sr=function(he){var we=setTimeout(function(){he.classList.remove(oe),clearTimeout(we)},r.cssAnimationDuration+300)},or=setTimeout(function(){for(var he,we=0;we<G;we++)he=O[we],he&&(sr(he),ge=he.querySelectorAll("[id^="+T.ID+"]"),ir(ge));clearTimeout(or)},z);r=N(!0,r,S)},me={Notify:{init:function(f){t=N(!0,u,f),A(F,"NotiflixNotifyInternalCSS")},merge:function(f){return t?void(t=N(!0,t,f)):(B("You have to initialize the Notify module before call Merge function."),!1)},success:function(f,m,y){$(l.Success,f,m,y)},failure:function(f,m,y){$(l.Failure,f,m,y)},warning:function(f,m,y){$(l.Warning,f,m,y)},info:function(f,m,y){$(l.Info,f,m,y)}},Report:{init:function(f){i=N(!0,g,f),A(te,"NotiflixReportInternalCSS")},merge:function(f){return i?void(i=N(!0,i,f)):(B("You have to initialize the Report module before call Merge function."),!1)},success:function(f,m,y,I,P){de(d.Success,f,m,y,I,P)},failure:function(f,m,y,I,P){de(d.Failure,f,m,y,I,P)},warning:function(f,m,y,I,P){de(d.Warning,f,m,y,I,P)},info:function(f,m,y,I,P){de(d.Info,f,m,y,I,P)}},Confirm:{init:function(f){s=N(!0,h,f),A(Fe,"NotiflixConfirmInternalCSS")},merge:function(f){return s?void(s=N(!0,s,f)):(B("You have to initialize the Confirm module before call Merge function."),!1)},show:function(f,m,y,I,P,z,O){Tn(p.Show,f,m,null,y,I,P,z,O)},ask:function(f,m,y,I,P,z,O,k){Tn(p.Ask,f,m,y,I,P,z,O,k)},prompt:function(f,m,y,I,P,z,O,k){Tn(p.Prompt,f,m,y,I,P,z,O,k)}},Loading:{init:function(f){o=N(!0,x,f),A(Qo,"NotiflixLoadingInternalCSS")},merge:function(f){return o?void(o=N(!0,o,f)):(B("You have to initialize the Loading module before call Merge function."),!1)},standard:function(f,m){Pe(_.Standard,f,m,!0,0)},hourglass:function(f,m){Pe(_.Hourglass,f,m,!0,0)},circle:function(f,m){Pe(_.Circle,f,m,!0,0)},arrows:function(f,m){Pe(_.Arrows,f,m,!0,0)},dots:function(f,m){Pe(_.Dots,f,m,!0,0)},pulse:function(f,m){Pe(_.Pulse,f,m,!0,0)},custom:function(f,m){Pe(_.Custom,f,m,!0,0)},notiflix:function(f,m){Pe(_.Notiflix,f,m,!0,0)},remove:function(f){typeof f!="number"&&(f=0),Pe(null,null,null,!1,f)},change:function(f){Ko(f)}},Block:{init:function(f){r=N(!0,T,f),A(Jo,"NotiflixBlockInternalCSS")},merge:function(f){return r?void(r=N(!0,r,f)):(B('You have to initialize the "Notiflix.Block" module before call Merge function.'),!1)},standard:function(f,m,y){qe(!0,b.Standard,f,m,y)},hourglass:function(f,m,y){qe(!0,b.Hourglass,f,m,y)},circle:function(f,m,y){qe(!0,b.Circle,f,m,y)},arrows:function(f,m,y){qe(!0,b.Arrows,f,m,y)},dots:function(f,m,y){qe(!0,b.Dots,f,m,y)},pulse:function(f,m,y){qe(!0,b.Pulse,f,m,y)},remove:function(f,m){typeof m!="number"&&(m=0),qe(!1,null,f,null,null,m)}}};return typeof e.Notiflix=="object"?N(!0,e.Notiflix,{Notify:me.Notify,Report:me.Report,Confirm:me.Confirm,Loading:me.Loading,Block:me.Block}):{Notify:me.Notify,Report:me.Report,Confirm:me.Confirm,Loading:me.Loading,Block:me.Block}})})(Jr);const ft=Un,ji="@firebase/database",Gi="0.14.4";let Ts="";function Zr(n){Ts=n}class ea{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ae(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ti(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ta{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Oe(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Ss=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ea(e)}}catch{}return new ta},Qe=Ss("localStorage"),Xn=Ss("sessionStorage");const at=new mr("@firebase/database"),na=function(){let n=1;return function(){return n++}}(),Rs=function(n){const e=dr(n),t=new hr;t.update(e);const i=t.digest();return pr.encodeByteArray(i)},Bt=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Bt.apply(null,i):typeof i=="object"?e+=ae(i):e+=i,e+=" "}return e};let Je=null,qi=!0;const ia=function(n,e){v(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(at.logLevel=gr.VERBOSE,Je=at.log.bind(at),e&&Xn.set("logging_enabled",!0)):typeof n=="function"?Je=n:(Je=null,Xn.remove("logging_enabled"))},pe=function(...n){if(qi===!0&&(qi=!1,Je===null&&Xn.get("logging_enabled")===!0&&ia(!0)),Je){const e=Bt.apply(null,n);Je(e)}},Ht=function(n){return function(...e){pe(n,...e)}},Vn=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bt(...n);at.error(e)},Le=function(...n){const e=`FIREBASE FATAL ERROR: ${Bt(...n)}`;throw at.error(e),new Error(e)},ve=function(...n){const e="FIREBASE WARNING: "+Bt(...n);at.warn(e)},sa=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ve("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ps=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},oa=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},dt="[MIN_NAME]",Ze="[MAX_NAME]",_t=function(n,e){if(n===e)return 0;if(n===dt||e===Ze)return-1;if(e===dt||n===Ze)return 1;{const t=Yi(n),i=Yi(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},ra=function(n,e){return n===e?0:n<e?-1:1},wt=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ae(e))},si=function(n){if(typeof n!="object"||n===null)return ae(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ae(e[i]),t+=":",t+=si(n[e[i]]);return t+="}",t},As=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function be(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Ms=function(n){v(!Ps(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,o,r,a,c;n===0?(o=0,r=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=a+i,r=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,r=Math.round(n/Math.pow(2,1-i-t))));const l=[];for(c=t;c;c-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let g=parseInt(u.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),d=d+g}return d.toLowerCase()},aa=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},la=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ca(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const ua=new RegExp("^-?(0*)\\d{1,10}$"),fa=-2147483648,da=2147483647,Yi=function(n){if(ua.test(n)){const e=Number(n);if(e>=fa&&e<=da)return e}return null},yt=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw ve("Exception was thrown by user callback.",t),e},Math.floor(0))}},ha=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Et=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};class pa{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ve(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ma{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ve(e)}}class lt{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}lt.OWNER="owner";const oi="5",Ls="v",Os="s",Ds="r",Fs="f",zs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ws="ls",Bs="p",jn="ac",Hs="websocket",Us="long_polling";class Xs{constructor(e,t,i,s,o=!1,r="",a=!1,c=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=r,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qe.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Qe.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ga(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Vs(n,e,t){v(typeof e=="string","typeof type must == string"),v(typeof t=="object","typeof params must == object");let i;if(e===Hs)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Us)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);ga(n)&&(t.ns=n.namespace);const s=[];return be(t,(o,r)=>{s.push(o+"="+r)}),i+s.join("&")}class _a{constructor(){this.counters_={}}incrementCounter(e,t=1){Oe(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return br(this.counters_)}}const An={},Mn={};function ri(n){const e=n.toString();return An[e]||(An[e]=new _a),An[e]}function ya(n,e){const t=n.toString();return Mn[t]||(Mn[t]=e()),Mn[t]}class xa{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&yt(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const $i="start",va="close",ba="pLPCommand",wa="pRTLPCB",js="id",Gs="pw",qs="ser",ka="cb",Ca="seg",Na="ts",Ea="d",Ia="dframe",Ys=1870,$s=30,Ta=Ys-$s,Sa=25e3,Ra=3e4;class rt{constructor(e,t,i,s,o,r,a){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.transportSessionId=r,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ht(e),this.stats_=ri(t),this.urlFn=c=>(this.appCheckToken&&(c[jn]=this.appCheckToken),Vs(t,Us,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new xa(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ra)),oa(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ai((...o)=>{const[r,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,r===$i)this.id=a,this.password=c;else if(r===va)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+r)},(...o)=>{const[r,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(r,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[$i]="t",i[qs]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[ka]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Ls]=oi,this.transportSessionId&&(i[Os]=this.transportSessionId),this.lastSessionId&&(i[Ws]=this.lastSessionId),this.applicationId&&(i[Bs]=this.applicationId),this.appCheckToken&&(i[jn]=this.appCheckToken),typeof location<"u"&&location.hostname&&zs.test(location.hostname)&&(i[Ds]=Fs);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rt.forceAllow_=!0}static forceDisallow(){rt.forceDisallow_=!0}static isAvailable(){return rt.forceAllow_?!0:!rt.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!aa()&&!la()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=kr(t),s=As(i,Ta);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Ia]="t",i[js]=e,i[Gs]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ae(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ai{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=na(),window[ba+this.uniqueCallbackIdentifier]=e,window[wa+this.uniqueCallbackIdentifier]=t,this.myIFrame=ai.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(a){pe("frame writing exception"),a.stack&&pe(a.stack),pe(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pe("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[js]=this.myID,e[Gs]=this.myPW,e[qs]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+$s+i.length<=Ys;){const r=this.pendingSegs.shift();i=i+"&"+Ca+s+"="+r.seg+"&"+Na+s+"="+r.ts+"&"+Ea+s+"="+r.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(Sa)),o=()=>{clearTimeout(s),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}const Pa=16384,Aa=45e3;let Jt=null;typeof MozWebSocket<"u"?Jt=MozWebSocket:typeof WebSocket<"u"&&(Jt=WebSocket);class Ne{constructor(e,t,i,s,o,r,a){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ht(this.connId),this.stats_=ri(t),this.connURL=Ne.connectionURL_(t,r,a,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,o){const r={};return r[Ls]=oi,typeof location<"u"&&location.hostname&&zs.test(location.hostname)&&(r[Ds]=Fs),t&&(r[Os]=t),i&&(r[Ws]=i),s&&(r[jn]=s),o&&(r[Bs]=o),Vs(e,Hs,r)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qe.set("previous_websocket_failure",!0);try{let i;Ns(),this.mySock=new Jt(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ne.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Jt!==null&&!Ne.forceDisallow_}static previouslyFailed(){return Qe.isInMemoryStorage||Qe.get("previous_websocket_failure")===!0}markConnectionHealthy(){Qe.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ti(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(v(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=ae(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=As(t,Pa);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Aa))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ne.responsesRequiredToBeHealthy=2;Ne.healthyTimeout=3e4;class Pt{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[rt,Ne]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Ne&&Ne.isAvailable();let i=t&&!Ne.previouslyFailed();if(e.webSocketOnly&&(t||ve("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ne];else{const s=this.transports_=[];for(const o of Pt.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);Pt.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Pt.globalTransportInitialized_=!1;const Ma=6e4,La=5e3,Oa=10*1024,Da=100*1024,Ln="t",Qi="d",Fa="s",Ki="r",za="e",Ji="o",Zi="a",es="n",ts="p",Wa="h";class Ba{constructor(e,t,i,s,o,r,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=r,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ht("c:"+this.id+":"),this.transportManager_=new Pt(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Et(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Da?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Oa?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ln in e){const t=e[Ln];t===Zi?this.upgradeIfSecondaryHealthy_():t===Ki?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Ji&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wt("t",e),i=wt("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ts,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zi,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:es,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wt("t",e),i=wt("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wt(Ln,e);if(Qi in e){const i=e[Qi];if(t===Wa){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===es){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Fa?this.onConnectionShutdown_(i):t===Ki?this.onReset_(i):t===za?Vn("Server Error: "+i):t===Ji?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Vn("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oi!==i&&ve("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Et(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ma))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Et(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(La))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ts,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Qs{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class Ks{constructor(e){this.allowedEvents_=e,this.listeners_={},v(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let o=0;o<s.length;o++)if(s[o].callback===t&&(!i||i===s[o].context)){s.splice(o,1);return}}validateEventType_(e){v(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Zt extends Ks{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Es()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Zt}getInitialEvent(e){return v(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const ns=32,is=768;class K{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Y(){return new K("")}function X(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ue(n){return n.pieces_.length-n.pieceNum_}function J(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new K(n.pieces_,e)}function Js(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Ha(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Zs(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function eo(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new K(e,0)}function le(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof K)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new K(t,0)}function H(n){return n.pieceNum_>=n.pieces_.length}function ye(n,e){const t=X(n),i=X(e);if(t===null)return e;if(t===i)return ye(J(n),J(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function to(n,e){if(Ue(n)!==Ue(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ee(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ue(n)>Ue(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class Ua{constructor(e,t){this.errorPrefix_=t,this.parts_=Zs(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=dn(this.parts_[i]);no(this)}}function Xa(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=dn(e),no(n)}function Va(n){const e=n.parts_.pop();n.byteLength_-=dn(e),n.parts_.length>0&&(n.byteLength_-=1)}function no(n){if(n.byteLength_>is)throw new Error(n.errorPrefix_+"has a key path longer than "+is+" bytes ("+n.byteLength_+").");if(n.parts_.length>ns)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ns+") or object contains a cycle "+Ye(n))}function Ye(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}class li extends Ks{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new li}getInitialEvent(e){return v(e==="visible","Unknown event type: "+e),[this.visible_]}}const kt=1e3,ja=60*5*1e3,ss=30*1e3,Ga=1.3,qa=3e4,Ya="server_kill",os=3;class Me extends Qs{constructor(e,t,i,s,o,r,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=r,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Me.nextPersistentConnectionId_++,this.log_=Ht("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kt,this.maxReconnectDelay_=ja,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ns())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");li.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Zt.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,o={r:s,a:e,b:t};this.log_(ae(o)),v(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new ii,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:r=>{const a=r.d;r.s==="ok"?t.resolve(a):t.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,s){this.initConnection_();const o=e._queryIdentifier,r=e._path.toString();this.log_("Listen called for "+r+" "+o),this.listens.has(r)||this.listens.set(r,new Map),v(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),v(!this.listens.get(r).has(o),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(r).set(o,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i},r="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(r,o,a=>{const c=a.d,l=a.s;Me.warnOnListenWarnings_(c,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Oe(e,"w")){const i=ut(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();ve(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||_r(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ss)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=yr(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const o=s.s,r=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),v(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const o={p:e},r="n";s&&(o.q=i,o.t=s),this.sendRequest(r,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,r=>{s&&setTimeout(()=>{s(r.s,r.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,o){this.initConnection_();const r={p:t,d:i};o!==void 0&&(r.h=o),this.outstandingPuts_.push({action:e,request:r,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ae(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):Vn("Unrecognized action received from server: "+ae(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){v(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>qa&&(this.reconnectDelay_=kt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ga)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Me.nextConnectionId_++,o=this.lastSessionId;let r=!1,a=null;const c=function(){a?a.close():(r=!0,i())},l=function(d){v(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,g]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);r?pe("getToken() completed but was canceled"):(pe("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=g&&g.token,a=new Ba(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,p=>{ve(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ya)},o))}catch(d){this.log_("Failed to get token: "+d),r||(this.repoInfo_.nodeAdmin&&ve(d),c())}}}interrupt(e){pe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){pe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ui(this.interruptReasons_)&&(this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>si(o)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new K(e).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){pe("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=os&&(this.reconnectDelay_=ss,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){pe("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=os&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Ts.replace(/\./g,"-")]=1,Es()?e["framework.cordova"]=1:xr()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Zt.getInstance().currentlyOnline();return Ui(this.interruptReasons_)&&e}}Me.nextPersistentConnectionId_=0;Me.nextConnectionId_=0;class W{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new W(e,t)}}class pn{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new W(dt,e),s=new W(dt,t);return this.compare(i,s)!==0}minPost(){return W.MIN}}let $t;class io extends pn{static get __EMPTY_NODE(){return $t}static set __EMPTY_NODE(e){$t=e}compare(e,t){return _t(e.name,t.name)}isDefinedOn(e){throw Wt("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return W.MIN}maxPost(){return new W(Ze,$t)}makePost(e,t){return v(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,$t)}toString(){return".key"}}const ct=new io;class Qt{constructor(e,t,i,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let r=1;for(;!e.isEmpty();)if(e=e,r=t?i(e.key,t):1,s&&(r*=-1),r<0)this.isReverse_?e=e.left:e=e.right;else if(r===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ue{constructor(e,t,i,s,o){this.key=e,this.value=t,this.color=i??ue.RED,this.left=s??xe.EMPTY_NODE,this.right=o??xe.EMPTY_NODE}copy(e,t,i,s,o){return new ue(e??this.key,t??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const o=i(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):o===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return xe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return xe.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ue.RED=!0;ue.BLACK=!1;class $a{copy(e,t,i,s,o){return this}insert(e,t,i){return new ue(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xe{constructor(e,t=xe.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new xe(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ue.BLACK,null,null))}remove(e){return new xe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ue.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qt(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qt(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qt(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qt(this.root_,null,this.comparator_,!0,e)}}xe.EMPTY_NODE=new $a;function Qa(n,e){return _t(n.name,e.name)}function ci(n,e){return _t(n,e)}let Gn;function Ka(n){Gn=n}const so=function(n){return typeof n=="number"?"number:"+Ms(n):"string:"+n},oo=function(n){if(n.isLeafNode()){const e=n.val();v(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Oe(e,".sv"),"Priority must be a string or number.")}else v(n===Gn||n.isEmpty(),"priority of unexpected type.");v(n===Gn||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let rs;class ce{constructor(e,t=ce.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,v(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),oo(this.priorityNode_)}static set __childrenNodeConstructor(e){rs=e}static get __childrenNodeConstructor(){return rs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ce(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return H(e)?this:X(e)===".priority"?this.priorityNode_:ce.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:ce.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=X(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(v(i!==".priority"||Ue(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,ce.__childrenNodeConstructor.EMPTY_NODE.updateChild(J(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+so(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Ms(this.value_):e+=this.value_,this.lazyHash_=Rs(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ce.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ce.__childrenNodeConstructor?-1:(v(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=ce.VALUE_TYPE_ORDER.indexOf(t),o=ce.VALUE_TYPE_ORDER.indexOf(i);return v(s>=0,"Unknown leaf type: "+t),v(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}ce.VALUE_TYPE_ORDER=["object","boolean","number","string"];let ro,ao;function Ja(n){ro=n}function Za(n){ao=n}class el extends pn{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),o=i.compareTo(s);return o===0?_t(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return W.MIN}maxPost(){return new W(Ze,new ce("[PRIORITY-POST]",ao))}makePost(e,t){const i=ro(e);return new W(t,new ce("[PRIORITY-POST]",i))}toString(){return".priority"}}const ie=new el;const tl=Math.log(2);class nl{constructor(e){const t=o=>parseInt(Math.log(o)/tl,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const en=function(n,e,t,i){n.sort(e);const s=function(c,l){const u=l-c;let d,g;if(u===0)return null;if(u===1)return d=n[c],g=t?t(d):d,new ue(g,d.node,ue.BLACK,null,null);{const p=parseInt(u/2,10)+c,h=s(c,p),_=s(p+1,l);return d=n[p],g=t?t(d):d,new ue(g,d.node,ue.BLACK,h,_)}},o=function(c){let l=null,u=null,d=n.length;const g=function(h,_){const x=d-h,b=d;d-=h;const T=s(x+1,b),B=n[x],w=t?t(B):B;p(new ue(w,B.node,_,null,T))},p=function(h){l?(l.left=h,l=h):(u=h,l=h)};for(let h=0;h<c.count;++h){const _=c.nextBitIsOne(),x=Math.pow(2,c.count-(h+1));_?g(x,ue.BLACK):(g(x,ue.BLACK),g(x,ue.RED))}return u},r=new nl(n.length),a=o(r);return new xe(i||e,a)};let On;const ot={};class Ae{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return v(ot&&ie,"ChildrenNode.ts has not been loaded"),On=On||new Ae({".priority":ot},{".priority":ie}),On}get(e){const t=ut(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xe?t:null}hasIndex(e){return Oe(this.indexSet_,e.toString())}addIndex(e,t){v(e!==ct,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const o=t.getIterator(W.Wrap);let r=o.getNext();for(;r;)s=s||e.isDefinedOn(r.node),i.push(r),r=o.getNext();let a;s?a=en(i,e.getCompare()):a=ot;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Ae(u,l)}addToIndexes(e,t){const i=Kt(this.indexes_,(s,o)=>{const r=ut(this.indexSet_,o);if(v(r,"Missing index implementation for "+o),s===ot)if(r.isDefinedOn(e.node)){const a=[],c=t.getIterator(W.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),en(a,r.getCompare())}else return ot;else{const a=t.get(e.name);let c=s;return a&&(c=c.remove(new W(e.name,a))),c.insert(e,e.node)}});return new Ae(i,this.indexSet_)}removeFromIndexes(e,t){const i=Kt(this.indexes_,s=>{if(s===ot)return s;{const o=t.get(e.name);return o?s.remove(new W(e.name,o)):s}});return new Ae(i,this.indexSet_)}}let Ct;class R{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&oo(this.priorityNode_),this.children_.isEmpty()&&v(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ct||(Ct=new R(new xe(ci),null,Ae.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ct}updatePriority(e){return this.children_.isEmpty()?this:new R(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Ct:t}}getChild(e){const t=X(e);return t===null?this:this.getImmediateChild(t).getChild(J(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(v(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new W(e,t);let s,o;t.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const r=s.isEmpty()?Ct:this.priorityNode_;return new R(s,r,o)}}updateChild(e,t){const i=X(e);if(i===null)return t;{v(X(e)!==".priority"||Ue(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(J(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,o=!0;if(this.forEachChild(ie,(r,a)=>{t[r]=a.val(e),i++,o&&R.INTEGER_REGEXP_.test(r)?s=Math.max(s,Number(r)):o=!1}),!e&&o&&s<2*i){const r=[];for(const a in t)r[a]=t[a];return r}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+so(this.getPriority().val())+":"),this.forEachChild(ie,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":Rs(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new W(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new W(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new W(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,W.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,W.Wrap);let o=s.peek();for(;o!=null&&t.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ut?-1:0}withIndex(e){if(e===ct||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new R(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ct||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(ie),s=t.getIterator(ie);let o=i.getNext(),r=s.getNext();for(;o&&r;){if(o.name!==r.name||!o.node.equals(r.node))return!1;o=i.getNext(),r=s.getNext()}return o===null&&r===null}else return!1;else return!1}}resolveIndex_(e){return e===ct?null:this.indexMap_.get(e.toString())}}R.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class il extends R{constructor(){super(new xe(ci),R.EMPTY_NODE,Ae.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return R.EMPTY_NODE}isEmpty(){return!1}}const Ut=new il;Object.defineProperties(W,{MIN:{value:new W(dt,R.EMPTY_NODE)},MAX:{value:new W(Ze,Ut)}});io.__EMPTY_NODE=R.EMPTY_NODE;ce.__childrenNodeConstructor=R;Ka(Ut);Za(Ut);const sl=!0;function fe(n,e=null){if(n===null)return R.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),v(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new ce(t,fe(e))}if(!(n instanceof Array)&&sl){const t=[];let i=!1;if(be(n,(r,a)=>{if(r.substring(0,1)!=="."){const c=fe(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),t.push(new W(r,c)))}}),t.length===0)return R.EMPTY_NODE;const o=en(t,Qa,r=>r.name,ci);if(i){const r=en(t,ie.getCompare());return new R(o,fe(e),new Ae({".priority":r},{".priority":ie}))}else return new R(o,fe(e),Ae.Default)}else{let t=R.EMPTY_NODE;return be(n,(i,s)=>{if(Oe(n,i)&&i.substring(0,1)!=="."){const o=fe(s);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(fe(e))}}Ja(fe);class ol extends pn{constructor(e){super(),this.indexPath_=e,v(!H(e)&&X(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),o=i.compareTo(s);return o===0?_t(e.name,t.name):o}makePost(e,t){const i=fe(e),s=R.EMPTY_NODE.updateChild(this.indexPath_,i);return new W(t,s)}maxPost(){const e=R.EMPTY_NODE.updateChild(this.indexPath_,Ut);return new W(Ze,e)}toString(){return Zs(this.indexPath_,0).join("/")}}class rl extends pn{compare(e,t){const i=e.node.compareTo(t.node);return i===0?_t(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,t){const i=fe(e);return new W(t,i)}toString(){return".value"}}const al=new rl;function lo(n){return{type:"value",snapshotNode:n}}function ht(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function At(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Mt(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function ll(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}class ui{constructor(e){this.index_=e}updateChild(e,t,i,s,o,r){v(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(r!=null&&(i.isEmpty()?e.hasChild(t)?r.trackChildChange(At(t,a)):v(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?r.trackChildChange(ht(t,i)):r.trackChildChange(Mt(t,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ie,(s,o)=>{t.hasChild(s)||i.trackChildChange(At(s,o))}),t.isLeafNode()||t.forEachChild(ie,(s,o)=>{if(e.hasChild(s)){const r=e.getImmediateChild(s);r.equals(o)||i.trackChildChange(Mt(s,o,r))}else i.trackChildChange(ht(s,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?R.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lt{constructor(e){this.indexedFilter_=new ui(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lt.getStartPost_(e),this.endPost_=Lt.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,o,r){return this.matches(new W(t,i))||(i=R.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,o,r)}updateFullNode(e,t,i){t.isLeafNode()&&(t=R.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(R.EMPTY_NODE);const o=this;return t.forEachChild(ie,(r,a)=>{o.matches(new W(r,a))||(s=s.updateImmediateChild(r,R.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}class cl{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Lt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,o,r){return this.rangedFilter_.matches(new W(t,i))||(i=R.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,o,r):this.fullLimitUpdateChild_(e,t,i,o,r)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=R.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=R.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let r=0;for(;o.hasNext()&&r<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),r++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(R.EMPTY_NODE);let o;this.reverse_?o=s.getReverseIterator(this.index_):o=s.getIterator(this.index_);let r=0;for(;o.hasNext();){const a=o.getNext();r<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?r++:s=s.updateImmediateChild(a.name,R.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,o){let r;if(this.reverse_){const d=this.index_.getCompare();r=(g,p)=>d(p,g)}else r=this.index_.getCompare();const a=e;v(a.numChildren()===this.limit_,"");const c=new W(t,i),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){const d=a.getImmediateChild(t);let g=s.getChildAfterChild(this.index_,l,this.reverse_);for(;g!=null&&(g.name===t||a.hasChild(g.name));)g=s.getChildAfterChild(this.index_,g,this.reverse_);const p=g==null?1:r(g,c);if(u&&!i.isEmpty()&&p>=0)return o!=null&&o.trackChildChange(Mt(t,i,d)),a.updateImmediateChild(t,i);{o!=null&&o.trackChildChange(At(t,d));const _=a.updateImmediateChild(t,R.EMPTY_NODE);return g!=null&&this.rangedFilter_.matches(g)?(o!=null&&o.trackChildChange(ht(g.name,g.node)),_.updateImmediateChild(g.name,g.node)):_}}else return i.isEmpty()?e:u&&r(l,c)>=0?(o!=null&&(o.trackChildChange(At(l.name,l.node)),o.trackChildChange(ht(t,i))),a.updateImmediateChild(t,i).updateImmediateChild(l.name,R.EMPTY_NODE)):e}}class fi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return v(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return v(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dt}hasEnd(){return this.endSet_}getIndexEndValue(){return v(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return v(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ze}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return v(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){const e=new fi;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ul(n){return n.loadsAllData()?new ui(n.getIndex()):n.hasLimit()?new cl(n):new Lt(n)}function as(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ie?t="$priority":n.index_===al?t="$value":n.index_===ct?t="$key":(v(n.index_ instanceof ol,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ae(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=ae(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+ae(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=ae(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+ae(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ls(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ie&&(e.i=n.index_.toString()),e}class tn extends Qs{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Ht("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(v(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const r=tn.getListenId_(e,i),a={};this.listens_[r]=a;const c=as(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,i),ut(this.listens_,r)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",s(g,null)}})}unlisten(e,t){const i=tn.getListenId_(e,t);delete this.listens_[i]}get(e){const t=as(e._queryParams),i=e._path.toString(),s=new ii;return this.restRequest_(i+".json",t,(o,r)=>{let a=r;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(t.auth=s.accessToken),o&&o.token&&(t.ac=o.token);const r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+vr(t);this.log_("Sending REST request for "+r);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+r+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ti(a.responseText)}catch{ve("Failed to parse JSON response for "+r+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&ve("Got unsuccessful REST response for "+r+" Status: "+a.status),i(a.status);i=null}},a.open("GET",r,!0),a.send()})}}class fl{constructor(){this.rootNode_=R.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function nn(){return{value:null,children:new Map}}function co(n,e,t){if(H(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=X(e);n.children.has(i)||n.children.set(i,nn());const s=n.children.get(i);e=J(e),co(s,e,t)}}function qn(n,e,t){n.value!==null?t(e,n.value):dl(n,(i,s)=>{const o=new K(e.toString()+"/"+i);qn(s,o,t)})}function dl(n,e){n.children.forEach((t,i)=>{e(i,t)})}class hl{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&be(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}const cs=10*1e3,pl=30*1e3,ml=5*60*1e3;class gl{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hl(e);const i=cs+(pl-cs)*Math.random();Et(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;be(e,(s,o)=>{o>0&&Oe(this.statsToReport_,s)&&(t[s]=o,i=!0)}),i&&this.server_.reportStats(t),Et(this.reportStats_.bind(this),Math.floor(Math.random()*2*ml))}}var Ie;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ie||(Ie={}));function uo(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function di(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function hi(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class sn{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ie.ACK_USER_WRITE,this.source=uo()}operationForChild(e){if(H(this.path)){if(this.affectedTree.value!=null)return v(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new K(e));return new sn(Y(),t,this.revert)}}else return v(X(this.path)===e,"operationForChild called for unrelated child."),new sn(J(this.path),this.affectedTree,this.revert)}}class Ot{constructor(e,t){this.source=e,this.path=t,this.type=Ie.LISTEN_COMPLETE}operationForChild(e){return H(this.path)?new Ot(this.source,Y()):new Ot(this.source,J(this.path))}}class et{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ie.OVERWRITE}operationForChild(e){return H(this.path)?new et(this.source,Y(),this.snap.getImmediateChild(e)):new et(this.source,J(this.path),this.snap)}}class Dt{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ie.MERGE}operationForChild(e){if(H(this.path)){const t=this.children.subtree(new K(e));return t.isEmpty()?null:t.value?new et(this.source,Y(),t.value):new Dt(this.source,Y(),t)}else return v(X(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dt(this.source,J(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Xe{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(H(e))return this.isFullyInitialized()&&!this.filtered_;const t=X(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class _l{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yl(n,e,t,i){const s=[],o=[];return e.forEach(r=>{r.type==="child_changed"&&n.index_.indexedValueChanged(r.oldSnap,r.snapshotNode)&&o.push(ll(r.childName,r.snapshotNode))}),Nt(n,s,"child_removed",e,i,t),Nt(n,s,"child_added",e,i,t),Nt(n,s,"child_moved",o,i,t),Nt(n,s,"child_changed",e,i,t),Nt(n,s,"value",e,i,t),s}function Nt(n,e,t,i,s,o){const r=i.filter(a=>a.type===t);r.sort((a,c)=>vl(n,a,c)),r.forEach(a=>{const c=xl(n,a,o);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function xl(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function vl(n,e,t){if(e.childName==null||t.childName==null)throw Wt("Should only compare child_ events.");const i=new W(e.childName,e.snapshotNode),s=new W(t.childName,t.snapshotNode);return n.index_.compare(i,s)}function mn(n,e){return{eventCache:n,serverCache:e}}function It(n,e,t,i){return mn(new Xe(e,t,i),n.serverCache)}function fo(n,e,t,i){return mn(n.eventCache,new Xe(e,t,i))}function on(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function tt(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Dn;const bl=()=>(Dn||(Dn=new xe(ra)),Dn);class Z{constructor(e,t=bl()){this.value=e,this.children=t}static fromObject(e){let t=new Z(null);return be(e,(i,s)=>{t=t.set(new K(i),s)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Y(),value:this.value};if(H(e))return null;{const i=X(e),s=this.children.get(i);if(s!==null){const o=s.findRootMostMatchingPathAndValue(J(e),t);return o!=null?{path:le(new K(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(H(e))return this;{const t=X(e),i=this.children.get(t);return i!==null?i.subtree(J(e)):new Z(null)}}set(e,t){if(H(e))return new Z(t,this.children);{const i=X(e),o=(this.children.get(i)||new Z(null)).set(J(e),t),r=this.children.insert(i,o);return new Z(this.value,r)}}remove(e){if(H(e))return this.children.isEmpty()?new Z(null):new Z(null,this.children);{const t=X(e),i=this.children.get(t);if(i){const s=i.remove(J(e));let o;return s.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,s),this.value===null&&o.isEmpty()?new Z(null):new Z(this.value,o)}else return this}}get(e){if(H(e))return this.value;{const t=X(e),i=this.children.get(t);return i?i.get(J(e)):null}}setTree(e,t){if(H(e))return t;{const i=X(e),o=(this.children.get(i)||new Z(null)).setTree(J(e),t);let r;return o.isEmpty()?r=this.children.remove(i):r=this.children.insert(i,o),new Z(this.value,r)}}fold(e){return this.fold_(Y(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,o)=>{i[s]=o.fold_(le(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Y(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(H(e))return null;{const o=X(e),r=this.children.get(o);return r?r.findOnPath_(J(e),le(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Y(),t)}foreachOnPath_(e,t,i){if(H(e))return this;{this.value&&i(t,this.value);const s=X(e),o=this.children.get(s);return o?o.foreachOnPath_(J(e),le(t,s),i):new Z(null)}}foreach(e){this.foreach_(Y(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(le(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class Te{constructor(e){this.writeTree_=e}static empty(){return new Te(new Z(null))}}function Tt(n,e,t){if(H(e))return new Te(new Z(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let o=i.value;const r=ye(s,e);return o=o.updateChild(r,t),new Te(n.writeTree_.set(s,o))}else{const s=new Z(t),o=n.writeTree_.setTree(e,s);return new Te(o)}}}function us(n,e,t){let i=n;return be(t,(s,o)=>{i=Tt(i,le(e,s),o)}),i}function fs(n,e){if(H(e))return Te.empty();{const t=n.writeTree_.setTree(e,new Z(null));return new Te(t)}}function Yn(n,e){return it(n,e)!=null}function it(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(ye(t.path,e)):null}function ds(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ie,(i,s)=>{e.push(new W(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new W(i,s.value))}),e}function We(n,e){if(H(e))return n;{const t=it(n,e);return t!=null?new Te(new Z(t)):new Te(n.writeTree_.subtree(e))}}function $n(n){return n.writeTree_.isEmpty()}function pt(n,e){return ho(Y(),n.writeTree_,e)}function ho(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,o)=>{s===".priority"?(v(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=ho(le(n,s),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(le(n,".priority"),i)),t}}function gn(n,e){return _o(e,n)}function wl(n,e,t,i,s){v(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Tt(n.visibleWrites,e,t)),n.lastWriteId=i}function kl(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function Cl(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);v(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,o=!1,r=n.allWrites.length-1;for(;s&&r>=0;){const a=n.allWrites[r];a.visible&&(r>=t&&Nl(a,i.path)?s=!1:Ee(i.path,a.path)&&(o=!0)),r--}if(s){if(o)return El(n),!0;if(i.snap)n.visibleWrites=fs(n.visibleWrites,i.path);else{const a=i.children;be(a,c=>{n.visibleWrites=fs(n.visibleWrites,le(i.path,c))})}return!0}else return!1}function Nl(n,e){if(n.snap)return Ee(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ee(le(n.path,t),e))return!0;return!1}function El(n){n.visibleWrites=po(n.allWrites,Il,Y()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Il(n){return n.visible}function po(n,e,t){let i=Te.empty();for(let s=0;s<n.length;++s){const o=n[s];if(e(o)){const r=o.path;let a;if(o.snap)Ee(t,r)?(a=ye(t,r),i=Tt(i,a,o.snap)):Ee(r,t)&&(a=ye(r,t),i=Tt(i,Y(),o.snap.getChild(a)));else if(o.children){if(Ee(t,r))a=ye(t,r),i=us(i,a,o.children);else if(Ee(r,t))if(a=ye(r,t),H(a))i=us(i,Y(),o.children);else{const c=ut(o.children,X(a));if(c){const l=c.getChild(J(a));i=Tt(i,Y(),l)}}}else throw Wt("WriteRecord should have .snap or .children")}}return i}function mo(n,e,t,i,s){if(!i&&!s){const o=it(n.visibleWrites,e);if(o!=null)return o;{const r=We(n.visibleWrites,e);if($n(r))return t;if(t==null&&!Yn(r,Y()))return null;{const a=t||R.EMPTY_NODE;return pt(r,a)}}}else{const o=We(n.visibleWrites,e);if(!s&&$n(o))return t;if(!s&&t==null&&!Yn(o,Y()))return null;{const r=function(l){return(l.visible||s)&&(!i||!~i.indexOf(l.writeId))&&(Ee(l.path,e)||Ee(e,l.path))},a=po(n.allWrites,r,e),c=t||R.EMPTY_NODE;return pt(a,c)}}}function Tl(n,e,t){let i=R.EMPTY_NODE;const s=it(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ie,(o,r)=>{i=i.updateImmediateChild(o,r)}),i;if(t){const o=We(n.visibleWrites,e);return t.forEachChild(ie,(r,a)=>{const c=pt(We(o,new K(r)),a);i=i.updateImmediateChild(r,c)}),ds(o).forEach(r=>{i=i.updateImmediateChild(r.name,r.node)}),i}else{const o=We(n.visibleWrites,e);return ds(o).forEach(r=>{i=i.updateImmediateChild(r.name,r.node)}),i}}function Sl(n,e,t,i,s){v(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=le(e,t);if(Yn(n.visibleWrites,o))return null;{const r=We(n.visibleWrites,o);return $n(r)?s.getChild(t):pt(r,s.getChild(t))}}function Rl(n,e,t,i){const s=le(e,t),o=it(n.visibleWrites,s);if(o!=null)return o;if(i.isCompleteForChild(t)){const r=We(n.visibleWrites,s);return pt(r,i.getNode().getImmediateChild(t))}else return null}function Pl(n,e){return it(n.visibleWrites,e)}function Al(n,e,t,i,s,o,r){let a;const c=We(n.visibleWrites,e),l=it(c,Y());if(l!=null)a=l;else if(t!=null)a=pt(c,t);else return[];if(a=a.withIndex(r),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=r.getCompare(),g=o?a.getReverseIteratorFrom(i,r):a.getIteratorFrom(i,r);let p=g.getNext();for(;p&&u.length<s;)d(p,i)!==0&&u.push(p),p=g.getNext();return u}else return[]}function Ml(){return{visibleWrites:Te.empty(),allWrites:[],lastWriteId:-1}}function rn(n,e,t,i){return mo(n.writeTree,n.treePath,e,t,i)}function pi(n,e){return Tl(n.writeTree,n.treePath,e)}function hs(n,e,t,i){return Sl(n.writeTree,n.treePath,e,t,i)}function an(n,e){return Pl(n.writeTree,le(n.treePath,e))}function Ll(n,e,t,i,s,o){return Al(n.writeTree,n.treePath,e,t,i,s,o)}function mi(n,e,t){return Rl(n.writeTree,n.treePath,e,t)}function go(n,e){return _o(le(n.treePath,e),n.writeTree)}function _o(n,e){return{treePath:n,writeTree:e}}class Ol{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;v(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),v(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const o=s.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,Mt(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,At(i,s.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,ht(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,Mt(i,e.snapshotNode,s.oldSnap));else throw Wt("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}class Dl{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const yo=new Dl;class gi{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Xe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mi(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:tt(this.viewCache_),o=Ll(this.writes_,s,t,1,i,e);return o.length===0?null:o[0]}}function Fl(n){return{filter:n}}function zl(n,e){v(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),v(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Wl(n,e,t,i,s){const o=new Ol;let r,a;if(t.type===Ie.OVERWRITE){const l=t;l.source.fromUser?r=Qn(n,e,l.path,l.snap,i,s,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!H(l.path),r=ln(n,e,l.path,l.snap,i,s,a,o))}else if(t.type===Ie.MERGE){const l=t;l.source.fromUser?r=Hl(n,e,l.path,l.children,i,s,o):(v(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),r=Kn(n,e,l.path,l.children,i,s,a,o))}else if(t.type===Ie.ACK_USER_WRITE){const l=t;l.revert?r=Vl(n,e,l.path,i,s,o):r=Ul(n,e,l.path,l.affectedTree,i,s,o)}else if(t.type===Ie.LISTEN_COMPLETE)r=Xl(n,e,t.path,i,o);else throw Wt("Unknown operation type: "+t.type);const c=o.getChanges();return Bl(e,r,c),{viewCache:r,changes:c}}function Bl(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=on(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(lo(on(e)))}}function xo(n,e,t,i,s,o){const r=e.eventCache;if(an(i,t)!=null)return e;{let a,c;if(H(t))if(v(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=tt(e),u=l instanceof R?l:R.EMPTY_NODE,d=pi(i,u);a=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const l=rn(i,tt(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{const l=X(t);if(l===".priority"){v(Ue(t)===1,"Can't have a priority with additional path components");const u=r.getNode();c=e.serverCache.getNode();const d=hs(i,t,u,c);d!=null?a=n.filter.updatePriority(u,d):a=r.getNode()}else{const u=J(t);let d;if(r.isCompleteForChild(l)){c=e.serverCache.getNode();const g=hs(i,t,r.getNode(),c);g!=null?d=r.getNode().getImmediateChild(l).updateChild(u,g):d=r.getNode().getImmediateChild(l)}else d=mi(i,l,e.serverCache);d!=null?a=n.filter.updateChild(r.getNode(),l,d,u,s,o):a=r.getNode()}}return It(e,a,r.isFullyInitialized()||H(t),n.filter.filtersNodes())}}function ln(n,e,t,i,s,o,r,a){const c=e.serverCache;let l;const u=r?n.filter:n.filter.getIndexedFilter();if(H(t))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const p=c.getNode().updateChild(t,i);l=u.updateFullNode(c.getNode(),p,null)}else{const p=X(t);if(!c.isCompleteForPath(t)&&Ue(t)>1)return e;const h=J(t),x=c.getNode().getImmediateChild(p).updateChild(h,i);p===".priority"?l=u.updatePriority(c.getNode(),x):l=u.updateChild(c.getNode(),p,x,h,yo,null)}const d=fo(e,l,c.isFullyInitialized()||H(t),u.filtersNodes()),g=new gi(s,d,o);return xo(n,d,t,s,g,a)}function Qn(n,e,t,i,s,o,r){const a=e.eventCache;let c,l;const u=new gi(s,e,o);if(H(t))l=n.filter.updateFullNode(e.eventCache.getNode(),i,r),c=It(e,l,!0,n.filter.filtersNodes());else{const d=X(t);if(d===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),i),c=It(e,l,a.isFullyInitialized(),a.isFiltered());else{const g=J(t),p=a.getNode().getImmediateChild(d);let h;if(H(g))h=i;else{const _=u.getCompleteChild(d);_!=null?Js(g)===".priority"&&_.getChild(eo(g)).isEmpty()?h=_:h=_.updateChild(g,i):h=R.EMPTY_NODE}if(p.equals(h))c=e;else{const _=n.filter.updateChild(a.getNode(),d,h,g,u,r);c=It(e,_,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function ps(n,e){return n.eventCache.isCompleteForChild(e)}function Hl(n,e,t,i,s,o,r){let a=e;return i.foreach((c,l)=>{const u=le(t,c);ps(e,X(u))&&(a=Qn(n,a,u,l,s,o,r))}),i.foreach((c,l)=>{const u=le(t,c);ps(e,X(u))||(a=Qn(n,a,u,l,s,o,r))}),a}function ms(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function Kn(n,e,t,i,s,o,r,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;H(t)?l=i:l=new Z(null).setTree(t,i);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,g)=>{if(u.hasChild(d)){const p=e.serverCache.getNode().getImmediateChild(d),h=ms(n,p,g);c=ln(n,c,new K(d),h,s,o,r,a)}}),l.children.inorderTraversal((d,g)=>{const p=!e.serverCache.isCompleteForChild(d)&&g.value===null;if(!u.hasChild(d)&&!p){const h=e.serverCache.getNode().getImmediateChild(d),_=ms(n,h,g);c=ln(n,c,new K(d),_,s,o,r,a)}}),c}function Ul(n,e,t,i,s,o,r){if(an(s,t)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(H(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return ln(n,e,t,c.getNode().getChild(t),s,o,a,r);if(H(t)){let l=new Z(null);return c.getNode().forEachChild(ct,(u,d)=>{l=l.set(new K(u),d)}),Kn(n,e,t,l,s,o,a,r)}else return e}else{let l=new Z(null);return i.foreach((u,d)=>{const g=le(t,u);c.isCompleteForPath(g)&&(l=l.set(u,c.getNode().getChild(g)))}),Kn(n,e,t,l,s,o,a,r)}}function Xl(n,e,t,i,s){const o=e.serverCache,r=fo(e,o.getNode(),o.isFullyInitialized()||H(t),o.isFiltered());return xo(n,r,t,i,yo,s)}function Vl(n,e,t,i,s,o){let r;if(an(i,t)!=null)return e;{const a=new gi(i,e,s),c=e.eventCache.getNode();let l;if(H(t)||X(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=rn(i,tt(e));else{const d=e.serverCache.getNode();v(d instanceof R,"serverChildren would be complete if leaf node"),u=pi(i,d)}u=u,l=n.filter.updateFullNode(c,u,o)}else{const u=X(t);let d=mi(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=n.filter.updateChild(c,u,d,J(t),a,o):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,R.EMPTY_NODE,J(t),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(r=rn(i,tt(e)),r.isLeafNode()&&(l=n.filter.updateFullNode(l,r,o)))}return r=e.serverCache.isFullyInitialized()||an(i,Y())!=null,It(e,l,r,n.filter.filtersNodes())}}class jl{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new ui(i.getIndex()),o=ul(i);this.processor_=Fl(o);const r=t.serverCache,a=t.eventCache,c=s.updateFullNode(R.EMPTY_NODE,r.getNode(),null),l=o.updateFullNode(R.EMPTY_NODE,a.getNode(),null),u=new Xe(c,r.isFullyInitialized(),s.filtersNodes()),d=new Xe(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=mn(d,u),this.eventGenerator_=new _l(this.query_)}get query(){return this.query_}}function Gl(n){return n.viewCache_.serverCache.getNode()}function ql(n){return on(n.viewCache_)}function Yl(n,e){const t=tt(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!H(e)&&!t.getImmediateChild(X(e)).isEmpty())?t.getChild(e):null}function gs(n){return n.eventRegistrations_.length===0}function $l(n,e){n.eventRegistrations_.push(e)}function _s(n,e,t){const i=[];if(t){v(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(o=>{const r=o.createCancelEvent(t,s);r&&i.push(r)})}if(e){let s=[];for(let o=0;o<n.eventRegistrations_.length;++o){const r=n.eventRegistrations_[o];if(!r.matches(e))s.push(r);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function ys(n,e,t,i){e.type===Ie.MERGE&&e.source.queryId!==null&&(v(tt(n.viewCache_),"We should always have a full cache before handling merges"),v(on(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,o=Wl(n.processor_,s,e,t,i);return zl(n.processor_,o.viewCache),v(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,vo(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Ql(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ie,(o,r)=>{i.push(ht(o,r))}),t.isFullyInitialized()&&i.push(lo(t.getNode())),vo(n,i,t.getNode(),e)}function vo(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return yl(n.eventGenerator_,e,t,s)}let cn;class bo{constructor(){this.views=new Map}}function Kl(n){v(!cn,"__referenceConstructor has already been defined"),cn=n}function Jl(){return v(cn,"Reference.ts has not been loaded"),cn}function Zl(n){return n.views.size===0}function _i(n,e,t,i){const s=e.source.queryId;if(s!==null){const o=n.views.get(s);return v(o!=null,"SyncTree gave us an op for an invalid query."),ys(o,e,t,i)}else{let o=[];for(const r of n.views.values())o=o.concat(ys(r,e,t,i));return o}}function wo(n,e,t,i,s){const o=e._queryIdentifier,r=n.views.get(o);if(!r){let a=rn(t,s?i:null),c=!1;a?c=!0:i instanceof R?(a=pi(t,i),c=!1):(a=R.EMPTY_NODE,c=!1);const l=mn(new Xe(a,c,!1),new Xe(i,s,!1));return new jl(e,l)}return r}function ec(n,e,t,i,s,o){const r=wo(n,e,i,s,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,r),$l(r,t),Ql(r,t)}function tc(n,e,t,i){const s=e._queryIdentifier,o=[];let r=[];const a=Ve(n);if(s==="default")for(const[c,l]of n.views.entries())r=r.concat(_s(l,t,i)),gs(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{const c=n.views.get(s);c&&(r=r.concat(_s(c,t,i)),gs(c)&&(n.views.delete(s),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Ve(n)&&o.push(new(Jl())(e._repo,e._path)),{removed:o,events:r}}function ko(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Be(n,e){let t=null;for(const i of n.views.values())t=t||Yl(i,e);return t}function Co(n,e){if(e._queryParams.loadsAllData())return _n(n);{const i=e._queryIdentifier;return n.views.get(i)}}function No(n,e){return Co(n,e)!=null}function Ve(n){return _n(n)!=null}function _n(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let un;function nc(n){v(!un,"__referenceConstructor has already been defined"),un=n}function ic(){return v(un,"Reference.ts has not been loaded"),un}let sc=1;class xs{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Z(null),this.pendingWriteTree_=Ml(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Eo(n,e,t,i,s){return wl(n.pendingWriteTree_,e,t,i,s),s?Vt(n,new et(uo(),e,t)):[]}function Ke(n,e,t=!1){const i=kl(n.pendingWriteTree_,e);if(Cl(n.pendingWriteTree_,e)){let o=new Z(null);return i.snap!=null?o=o.set(Y(),!0):be(i.children,r=>{o=o.set(new K(r),!0)}),Vt(n,new sn(i.path,o,t))}else return[]}function Xt(n,e,t){return Vt(n,new et(di(),e,t))}function oc(n,e,t){const i=Z.fromObject(t);return Vt(n,new Dt(di(),e,i))}function rc(n,e){return Vt(n,new Ot(di(),e))}function ac(n,e,t){const i=xi(n,t);if(i){const s=vi(i),o=s.path,r=s.queryId,a=ye(o,e),c=new Ot(hi(r),a);return bi(n,o,c)}else return[]}function Io(n,e,t,i,s=!1){const o=e._path,r=n.syncPointTree_.get(o);let a=[];if(r&&(e._queryIdentifier==="default"||No(r,e))){const c=tc(r,e,t,i);Zl(r)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(g=>g._queryParams.loadsAllData())!==-1,d=n.syncPointTree_.findOnPath(o,(g,p)=>Ve(p));if(u&&!d){const g=n.syncPointTree_.subtree(o);if(!g.isEmpty()){const p=fc(g);for(let h=0;h<p.length;++h){const _=p[h],x=_.query,b=Po(n,_);n.listenProvider_.startListening(St(x),Ft(n,x),b.hashFn,b.onComplete)}}}!d&&l.length>0&&!i&&(u?n.listenProvider_.stopListening(St(e),null):l.forEach(g=>{const p=n.queryToTagMap.get(yn(g));n.listenProvider_.stopListening(St(g),p)}))}dc(n,l)}return a}function To(n,e,t,i){const s=xi(n,i);if(s!=null){const o=vi(s),r=o.path,a=o.queryId,c=ye(r,e),l=new et(hi(a),c,t);return bi(n,r,l)}else return[]}function lc(n,e,t,i){const s=xi(n,i);if(s){const o=vi(s),r=o.path,a=o.queryId,c=ye(r,e),l=Z.fromObject(t),u=new Dt(hi(a),c,l);return bi(n,r,u)}else return[]}function cc(n,e,t,i=!1){const s=e._path;let o=null,r=!1;n.syncPointTree_.foreachOnPath(s,(g,p)=>{const h=ye(g,s);o=o||Be(p,h),r=r||Ve(p)});let a=n.syncPointTree_.get(s);a?(r=r||Ve(a),o=o||Be(a,Y())):(a=new bo,n.syncPointTree_=n.syncPointTree_.set(s,a));let c;o!=null?c=!0:(c=!1,o=R.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((p,h)=>{const _=Be(h,Y());_&&(o=o.updateImmediateChild(p,_))}));const l=No(a,e);if(!l&&!e._queryParams.loadsAllData()){const g=yn(e);v(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const p=hc();n.queryToTagMap.set(g,p),n.tagToQueryMap.set(p,g)}const u=gn(n.pendingWriteTree_,s);let d=ec(a,e,t,u,o,c);if(!l&&!r&&!i){const g=Co(a,e);d=d.concat(pc(n,e,g))}return d}function yi(n,e,t){const s=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(r,a)=>{const c=ye(r,e),l=Be(a,c);if(l)return l});return mo(s,e,o,t,!0)}function uc(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(l,u)=>{const d=ye(l,t);i=i||Be(u,d)});let s=n.syncPointTree_.get(t);s?i=i||Be(s,Y()):(s=new bo,n.syncPointTree_=n.syncPointTree_.set(t,s));const o=i!=null,r=o?new Xe(i,!0,!1):null,a=gn(n.pendingWriteTree_,e._path),c=wo(s,e,a,o?r.getNode():R.EMPTY_NODE,o);return ql(c)}function Vt(n,e){return So(e,n.syncPointTree_,null,gn(n.pendingWriteTree_,Y()))}function So(n,e,t,i){if(H(n.path))return Ro(n,e,t,i);{const s=e.get(Y());t==null&&s!=null&&(t=Be(s,Y()));let o=[];const r=X(n.path),a=n.operationForChild(r),c=e.children.get(r);if(c&&a){const l=t?t.getImmediateChild(r):null,u=go(i,r);o=o.concat(So(a,c,l,u))}return s&&(o=o.concat(_i(s,n,i,t))),o}}function Ro(n,e,t,i){const s=e.get(Y());t==null&&s!=null&&(t=Be(s,Y()));let o=[];return e.children.inorderTraversal((r,a)=>{const c=t?t.getImmediateChild(r):null,l=go(i,r),u=n.operationForChild(r);u&&(o=o.concat(Ro(u,a,c,l)))}),s&&(o=o.concat(_i(s,n,i,t))),o}function Po(n,e){const t=e.query,i=Ft(n,t);return{hashFn:()=>(Gl(e)||R.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?ac(n,t._path,i):rc(n,t._path);{const o=ca(s,t);return Io(n,t,null,o)}}}}function Ft(n,e){const t=yn(e);return n.queryToTagMap.get(t)}function yn(n){return n._path.toString()+"$"+n._queryIdentifier}function xi(n,e){return n.tagToQueryMap.get(e)}function vi(n){const e=n.indexOf("$");return v(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new K(n.substr(0,e))}}function bi(n,e,t){const i=n.syncPointTree_.get(e);v(i,"Missing sync point for query tag that we're tracking");const s=gn(n.pendingWriteTree_,e);return _i(i,t,s,null)}function fc(n){return n.fold((e,t,i)=>{if(t&&Ve(t))return[_n(t)];{let s=[];return t&&(s=ko(t)),be(i,(o,r)=>{s=s.concat(r)}),s}})}function St(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(ic())(n._repo,n._path):n}function dc(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=yn(i),o=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(o)}}}function hc(){return sc++}function pc(n,e,t){const i=e._path,s=Ft(n,e),o=Po(n,t),r=n.listenProvider_.startListening(St(e),s,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(i);if(s)v(!Ve(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!H(l)&&u&&Ve(u))return[_n(u).query];{let g=[];return u&&(g=g.concat(ko(u).map(p=>p.query))),be(d,(p,h)=>{g=g.concat(h)}),g}});for(let l=0;l<c.length;++l){const u=c[l];n.listenProvider_.stopListening(St(u),Ft(n,u))}}return r}class wi{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new wi(t)}node(){return this.node_}}class ki{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=le(this.path_,e);return new ki(this.syncTree_,t)}node(){return yi(this.syncTree_,this.path_)}}const mc=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},vs=function(n,e,t){if(!n||typeof n!="object")return n;if(v(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return gc(n[".sv"],e,t);if(typeof n[".sv"]=="object")return _c(n[".sv"],e);v(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},gc=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:v(!1,"Unexpected server value: "+n)}},_c=function(n,e,t){n.hasOwnProperty("increment")||v(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&v(!1,"Unexpected increment value: "+i);const s=e.node();if(v(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const r=s.getValue();return typeof r!="number"?i:r+i},yc=function(n,e,t,i){return Ci(e,new ki(t,n),i)},Ao=function(n,e,t){return Ci(n,new wi(e),t)};function Ci(n,e,t){const i=n.getPriority().val(),s=vs(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const r=n,a=vs(r.getValue(),e,t);return a!==r.getValue()||s!==r.getPriority().val()?new ce(a,fe(s)):n}else{const r=n;return o=r,s!==r.getPriority().val()&&(o=o.updatePriority(new ce(s))),r.forEachChild(ie,(a,c)=>{const l=Ci(c,e.getImmediateChild(a),t);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}class Ni{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Ei(n,e){let t=e instanceof K?e:new K(e),i=n,s=X(t);for(;s!==null;){const o=ut(i.node.children,s)||{children:{},childCount:0};i=new Ni(s,i,o),t=J(t),s=X(t)}return i}function xt(n){return n.node.value}function Mo(n,e){n.node.value=e,Jn(n)}function Lo(n){return n.node.childCount>0}function xc(n){return xt(n)===void 0&&!Lo(n)}function xn(n,e){be(n.node.children,(t,i)=>{e(new Ni(t,n,i))})}function Oo(n,e,t,i){t&&!i&&e(n),xn(n,s=>{Oo(s,e,!0,i)}),t&&i&&e(n)}function vc(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function jt(n){return new K(n.parent===null?n.name:jt(n.parent)+"/"+n.name)}function Jn(n){n.parent!==null&&bc(n.parent,n.name,n)}function bc(n,e,t){const i=xc(t),s=Oe(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,Jn(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,Jn(n))}const wc=/[\[\].#$\/\u0000-\u001F\u007F]/,kc=/[\[\].#$\u0000-\u001F\u007F]/,Fn=10*1024*1024,Do=function(n){return typeof n=="string"&&n.length!==0&&!wc.test(n)},Fo=function(n){return typeof n=="string"&&n.length!==0&&!kc.test(n)},Cc=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Fo(n)},zo=function(n,e,t,i){i&&e===void 0||Ii(ni(n,"value"),e,t)},Ii=function(n,e,t){const i=t instanceof K?new Ua(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ye(i));if(typeof e=="function")throw new Error(n+"contains a function "+Ye(i)+" with contents = "+e.toString());if(Ps(e))throw new Error(n+"contains "+e.toString()+" "+Ye(i));if(typeof e=="string"&&e.length>Fn/3&&dn(e)>Fn)throw new Error(n+"contains a string greater than "+Fn+" utf8 bytes "+Ye(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,o=!1;if(be(e,(r,a)=>{if(r===".value")s=!0;else if(r!==".priority"&&r!==".sv"&&(o=!0,!Do(r)))throw new Error(n+" contains an invalid key ("+r+") "+Ye(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Xa(i,r),Ii(n,a,i),Va(i)}),s&&o)throw new Error(n+' contains ".value" child '+Ye(i)+" in addition to actual children.")}},Wo=function(n,e,t,i){if(!(i&&t===void 0)&&!Fo(t))throw new Error(ni(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Nc=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Wo(n,e,t,i)},Ti=function(n,e){if(X(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Ec=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Do(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Cc(t))throw new Error(ni(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};class Ic{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bo(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],o=s.getPath();t!==null&&!to(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(s)}t&&n.eventLists_.push(t)}function Re(n,e,t){Bo(n,t),Tc(n,i=>Ee(i,e)||Ee(e,i))}function Tc(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const o=s.path;e(o)?(Sc(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Sc(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Je&&pe("event: "+t.toString()),yt(i)}}}const Rc="repo_interrupt",Pc=25;class Ac{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ic,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nn(),this.transactionQueueTree_=new Ni,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Mc(n,e,t){if(n.stats_=ri(n.repoInfo_),n.forceRestClient_||ha())n.server_=new tn(n.repoInfo_,(i,s,o,r)=>{bs(n,i,s,o,r)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ws(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ae(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Me(n.repoInfo_,e,(i,s,o,r)=>{bs(n,i,s,o,r)},i=>{ws(n,i)},i=>{Lc(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=ya(n.repoInfo_,()=>new gl(n.stats_,n.server_)),n.infoData_=new fl,n.infoSyncTree_=new xs({startListening:(i,s,o,r)=>{let a=[];const c=n.infoData_.getNode(i._path);return c.isEmpty()||(a=Xt(n.infoSyncTree_,i._path,c),setTimeout(()=>{r("ok")},0)),a},stopListening:()=>{}}),Ri(n,"connected",!1),n.serverSyncTree_=new xs({startListening:(i,s,o,r)=>(n.server_.listen(i,o,s,(a,c)=>{const l=r(a,c);Re(n.eventQueue_,i._path,l)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function Ho(n){const t=n.infoData_.getNode(new K(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Si(n){return mc({timestamp:Ho(n)})}function bs(n,e,t,i,s){n.dataUpdateCount++;const o=new K(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let r=[];if(s)if(i){const c=Kt(t,l=>fe(l));r=lc(n.serverSyncTree_,o,c,s)}else{const c=fe(t);r=To(n.serverSyncTree_,o,c,s)}else if(i){const c=Kt(t,l=>fe(l));r=oc(n.serverSyncTree_,o,c)}else{const c=fe(t);r=Xt(n.serverSyncTree_,o,c)}let a=o;r.length>0&&(a=bn(n,o)),Re(n.eventQueue_,a,r)}function ws(n,e){Ri(n,"connected",e),e===!1&&Fc(n)}function Lc(n,e){be(e,(t,i)=>{Ri(n,t,i)})}function Ri(n,e,t){const i=new K("/.info/"+e),s=fe(t);n.infoData_.updateSnapshot(i,s);const o=Xt(n.infoSyncTree_,i,s);Re(n.eventQueue_,i,o)}function Uo(n){return n.nextWriteId_++}function Oc(n,e,t){const i=uc(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const o=fe(s).withIndex(e._queryParams.getIndex());cc(n.serverSyncTree_,e,t,!0);let r;if(e._queryParams.loadsAllData())r=Xt(n.serverSyncTree_,e._path,o);else{const a=Ft(n.serverSyncTree_,e);r=To(n.serverSyncTree_,e._path,o,a)}return Re(n.eventQueue_,e._path,r),Io(n.serverSyncTree_,e,t,null,!0),o},s=>(vn(n,"get for query "+ae(e)+" failed: "+s),Promise.reject(new Error(s))))}function Dc(n,e,t,i,s){vn(n,"set",{path:e.toString(),value:t,priority:i});const o=Si(n),r=fe(t,i),a=yi(n.serverSyncTree_,e),c=Ao(r,a,o),l=Uo(n),u=Eo(n.serverSyncTree_,e,c,l,!0);Bo(n.eventQueue_,u),n.server_.put(e.toString(),r.val(!0),(g,p)=>{const h=g==="ok";h||ve("set at "+e+" failed: "+g);const _=Ke(n.serverSyncTree_,l,!h);Re(n.eventQueue_,e,_),Wc(n,s,g,p)});const d=qo(n,e);bn(n,d),Re(n.eventQueue_,d,[])}function Fc(n){vn(n,"onDisconnectEvents");const e=Si(n),t=nn();qn(n.onDisconnect_,Y(),(s,o)=>{const r=yc(s,o,n.serverSyncTree_,e);co(t,s,r)});let i=[];qn(t,Y(),(s,o)=>{i=i.concat(Xt(n.serverSyncTree_,s,o));const r=qo(n,s);bn(n,r)}),n.onDisconnect_=nn(),Re(n.eventQueue_,Y(),i)}function zc(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Rc)}function vn(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),pe(t,...e)}function Wc(n,e,t,i){e&&yt(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let o=s;i&&(o+=": "+i);const r=new Error(o);r.code=s,e(r)}})}function Xo(n,e,t){return yi(n.serverSyncTree_,e,t)||R.EMPTY_NODE}function Pi(n,e=n.transactionQueueTree_){if(e||wn(n,e),xt(e)){const t=jo(n,e);v(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&Bc(n,jt(e),t)}else Lo(e)&&xn(e,t=>{Pi(n,t)})}function Bc(n,e,t){const i=t.map(l=>l.currentWriteId),s=Xo(n,e,i);let o=s;const r=s.hash();for(let l=0;l<t.length;l++){const u=t[l];v(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=ye(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;n.server_.put(c.toString(),a,l=>{vn(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let g=0;g<t.length;g++)t[g].status=2,u=u.concat(Ke(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&d.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();wn(n,Ei(n.transactionQueueTree_,e)),Pi(n,n.transactionQueueTree_),Re(n.eventQueue_,e,u);for(let g=0;g<d.length;g++)yt(d[g])}else{if(l==="datastale")for(let d=0;d<t.length;d++)t[d].status===3?t[d].status=4:t[d].status=0;else{ve("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<t.length;d++)t[d].status=4,t[d].abortReason=l}bn(n,e)}},r)}function bn(n,e){const t=Vo(n,e),i=jt(t),s=jo(n,t);return Hc(n,s,i),i}function Hc(n,e,t){if(e.length===0)return;const i=[];let s=[];const r=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=ye(t,c.path);let u=!1,d;if(v(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Ke(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Pc)u=!0,d="maxretry",s=s.concat(Ke(n.serverSyncTree_,c.currentWriteId,!0));else{const g=Xo(n,c.path,r);c.currentInputSnapshot=g;const p=e[a].update(g.val());if(p!==void 0){Ii("transaction failed: Data returned ",p,c.path);let h=fe(p);typeof p=="object"&&p!=null&&Oe(p,".priority")||(h=h.updatePriority(g.getPriority()));const x=c.currentWriteId,b=Si(n),T=Ao(h,g,b);c.currentOutputSnapshotRaw=h,c.currentOutputSnapshotResolved=T,c.currentWriteId=Uo(n),r.splice(r.indexOf(x),1),s=s.concat(Eo(n.serverSyncTree_,c.path,T,c.currentWriteId,c.applyLocally)),s=s.concat(Ke(n.serverSyncTree_,x,!0))}else u=!0,d="nodata",s=s.concat(Ke(n.serverSyncTree_,c.currentWriteId,!0))}Re(n.eventQueue_,t,s),s=[],u&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}wn(n,n.transactionQueueTree_);for(let a=0;a<i.length;a++)yt(i[a]);Pi(n,n.transactionQueueTree_)}function Vo(n,e){let t,i=n.transactionQueueTree_;for(t=X(e);t!==null&&xt(i)===void 0;)i=Ei(i,t),e=J(e),t=X(e);return i}function jo(n,e){const t=[];return Go(n,e,t),t.sort((i,s)=>i.order-s.order),t}function Go(n,e,t){const i=xt(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);xn(e,s=>{Go(n,s,t)})}function wn(n,e){const t=xt(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,Mo(e,t.length>0?t:void 0)}xn(e,i=>{wn(n,i)})}function qo(n,e){const t=jt(Vo(n,e)),i=Ei(n.transactionQueueTree_,e);return vc(i,s=>{zn(n,s)}),zn(n,i),Oo(i,s=>{zn(n,s)}),t}function zn(n,e){const t=xt(e);if(t){const i=[];let s=[],o=-1;for(let r=0;r<t.length;r++)t[r].status===3||(t[r].status===1?(v(o===r-1,"All SENT items should be at beginning of queue."),o=r,t[r].status=3,t[r].abortReason="set"):(v(t[r].status===0,"Unexpected transaction status in abort"),t[r].unwatcher(),s=s.concat(Ke(n.serverSyncTree_,t[r].currentWriteId,!0)),t[r].onComplete&&i.push(t[r].onComplete.bind(null,new Error("set"),!1,null))));o===-1?Mo(e,void 0):t.length=o+1,Re(n.eventQueue_,jt(e),s);for(let r=0;r<i.length;r++)yt(i[r])}}function Uc(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function Xc(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ve(`Invalid query segment '${t}' in query '${n}'`)}return e}const ks=function(n,e){const t=Vc(n),i=t.namespace;t.domain==="firebase.com"&&Le(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Le("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||sa();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xs(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new K(t.pathString)}},Vc=function(n){let e="",t="",i="",s="",o="",r=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let d=n.indexOf("?");d===-1&&(d=n.length),e=n.substring(0,Math.min(u,d)),u<d&&(s=Uc(n.substring(u,d)));const g=Xc(n.substring(Math.min(n.length,d)));l=e.indexOf(":"),l>=0?(r=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const p=e.slice(0,l);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{const h=e.indexOf(".");i=e.substring(0,h).toLowerCase(),t=e.substring(h+1),o=i}"ns"in g&&(o=g.ns)}return{host:e,port:c,domain:t,subdomain:i,secure:r,scheme:a,pathString:s,namespace:o}};const Cs="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",jc=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const o=new Array(8);for(s=7;s>=0;s--)o[s]=Cs.charAt(t%64),t=Math.floor(t/64);v(t===0,"Cannot push at time == 0");let r=o.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)r+=Cs.charAt(e[s]);return v(r.length===20,"nextPushId: Length should be 20."),r}}();class Gc{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ae(this.snapshot.exportVal())}}class qc{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Yc{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return v(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ai{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return H(this._path)?null:Js(this._path)}get ref(){return new De(this._repo,this._path)}get _queryIdentifier(){const e=ls(this._queryParams),t=si(e);return t==="{}"?"default":t}get _queryObject(){return ls(this._queryParams)}isEqual(e){if(e=nt(e),!(e instanceof Ai))return!1;const t=this._repo===e._repo,i=to(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ha(this._path)}}class De extends Ai{constructor(e,t){super(e,t,new fi,!1)}get parent(){const e=eo(this._path);return e===null?null:new De(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class zt{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new K(e),i=mt(this.ref,e);return new zt(this._node.getChild(t),i,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new zt(s,mt(this.ref,i),ie)))}hasChild(e){const t=new K(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kn(n,e){return n=nt(n),n._checkNotDeleted("ref"),e!==void 0?mt(n._root,e):n._root}function mt(n,e){return n=nt(n),X(n._path)===null?Nc("child","path",e,!1):Wo("child","path",e,!1),new De(n._repo,le(n._path,e))}function $c(n,e){n=nt(n),Ti("push",n._path),zo("push",e,n._path,!0);const t=Ho(n._repo),i=jc(t),s=mt(n,i),o=mt(n,i);let r;return e!=null?r=Mi(o,e).then(()=>o):r=Promise.resolve(o),s.then=r.then.bind(r),s.catch=r.then.bind(r,void 0),s}function Qc(n){return Ti("remove",n._path),Mi(n,null)}function Mi(n,e){n=nt(n),Ti("set",n._path),zo("set",e,n._path,!1);const t=new ii;return Dc(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Li(n){n=nt(n);const e=new Yc(()=>{}),t=new Oi(e);return Oc(n._repo,n,t).then(i=>new zt(i,new De(n._repo,n._path),n._queryParams.getIndex()))}class Oi{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new Gc("value",this,new zt(e.snapshotNode,new De(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qc(this,e,t):null}matches(e){return e instanceof Oi?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}Kl(De);nc(De);const Kc="FIREBASE_DATABASE_EMULATOR_HOST",Zn={};let Jc=!1;function Zc(n,e,t,i){n.repoInfo_=new Xs(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function eu(n,e,t,i,s){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Le("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pe("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let r=ks(o,s),a=r.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Kc]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,r=ks(o,s),a=r.repoInfo):c=!r.repoInfo.secure;const u=s&&c?new lt(lt.OWNER):new ma(n.name,n.options,e);Ec("Invalid Firebase Database URL",r),H(r.path)||Le("Database URL must point to the root of a Firebase Database (not including a child path).");const d=nu(a,n,u,new pa(n.name,t));return new iu(d,n)}function tu(n,e){const t=Zn[e];(!t||t[n.key]!==n)&&Le(`Database ${e}(${n.repoInfo_}) has already been deleted.`),zc(n),delete t[n.key]}function nu(n,e,t,i){let s=Zn[e.name];s||(s={},Zn[e.name]=s);let o=s[n.toURLString()];return o&&Le("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Ac(n,Jc,t,i),s[n.toURLString()]=o,o}class iu{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Mc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new De(this._repo,Y())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tu(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Le("Cannot call "+e+" on a deleted database.")}}function su(n=lr(),e){const t=rr(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=ar("database");i&&ou(t,...i)}return t}function ou(n,e,t,i={}){n=nt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Le("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Le('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new lt(lt.OWNER);else if(i.mockUserToken){const r=typeof i.mockUserToken=="string"?i.mockUserToken:cr(i.mockUserToken,n.app.options.projectId);o=new lt(r)}Zc(s,e,t,o)}function ru(n){Zr(wr),ur(new fr("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return eu(i,s,o,t)},"PUBLIC").setMultipleInstances(!0)),Hi(ji,Gi,n),Hi(ji,Gi,"esm2017")}Me.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Me.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};ru();const Cn=su();async function wu(n){const e=hn();if(!e)return;const{_id:t,list_name:i,author:s,description:o,title:r,book_image:a,buy_links:c}=n,l=kn(Cn,`users/${e.user.uid}/list`),u=$c(l);try{await Mi(u,{_id:t,list_name:i,author:s,description:o,title:r,book_image:a,buy_links:c}),ft.Notify.success("Book was added ti the list.")}catch(d){throw ft.Notify.success("Error adding book to the list!"),d}}async function au(){const n=hn();try{const e=kn(Cn,`users/${n.user.uid}/list`),t=await Li(e);return t!==null?Object.values(t.val()):[]}catch(e){throw ft.Notify.success("The shopping list is empty!"),e}}async function lu(n){const e=hn();try{const t=kn(Cn,`users/${e.user.uid}/list`),i=await Li(t),s=[];i.forEach(o=>{if(o.child("_id").val()===n){const r=mt(t,`${o.key}`),a=Qc(r);s.push(a)}}),await Promise.all(s),ft.Notify.success("Books were deleted.")}catch(t){throw ft.Notify.failure("Error removing books!"),t}}async function ku(n){const e=hn();if(e)try{const t=kn(Cn,`users/${e.user.uid}/list`),i=await Li(t);if(i.val()!==null){const s=Object.values(i.val()).find(o=>o._id===n);return s||null}return null}catch(t){throw ft.Notify.failure("Error getting book"),t}}function cu(n){return n?n.map(uu).join(""):(fn(),"")}function uu(n){const{_id:e,list_name:t,author:i,description:s,title:o,book_image:r,buy_links:a}=n;return`
    <li class="shoppinglist-item">
      ${fu(e)}
      <div class="shoppinglist-thumb">
        <img src="${r}" alt="${o}" class="shoppinglist-img" />
      </div>
      <div class="shoppinglist-info-book">
        <h3 class="shoppinglist-name-book">${o}</h3>
        <p class="shoppinglist-book-category">${t}</p>
        <p class="shoppinglist-book-text">${s}</p>
        <div class="shoppinglist-author-link-wrap">
          <p class="shoppinglist-name-author">${i}</p>
          ${du(a)}
        </div>
      </div>
    </li>
  `}function fu(n){return`
    <button type="button" data-book-id="${n}" class="shoppinglist-delete-book-button">
      <svg data-book-id="${n}" 
        class="shoppinglist-delete-book-button-svg"
        xmlns="http://www.w3.org/2000/svg"
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
      >
        <path
          d="M6.75 2.25H11.25M2.25 4.5H15.75M14.25 4.5L13.724 12.3895C13.6451 13.5732 13.6057 14.165 13.35 14.6138C13.1249 15.0088 12.7854 15.3265 12.3762 15.5248C11.9115 15.75 11.3183 15.75 10.132 15.75H7.86799C6.68168 15.75 6.08852 15.75 5.62375 15.5248C5.21457 15.3265 4.87507 15.0088 4.64999 14.6138C4.39433 14.165 4.35488 13.5732 4.27596 12.3895L3.75 4.5M7.5 7.875V11.625M10.5 7.875V11.625"
          stroke="white"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </button>
  `}function du(n){const e="../../img/shoppingList-sprite.svg";return`
    <ul class="shoppinglist-link-wrap">
      ${Wn(n[0].url,e,"shoppinglist-book-link-svg-cont-amazon","icon-Amazon")}
      ${Wn(n[1].url,e,"shoppinglist-book-link-svg-cont","icon-apple-books")}
      ${Wn(n[2].url,e,"shoppinglist-book-link-svg-cont","icon-book-shop")}
    </ul>
  `}function Wn(n,e,t,i){return`
    <li>
      <a href="${n}" target="_blank" class="shoppinglist-book-link">
        <svg class="${t}">
          <use class="shoppinglist-book-link-svg" href="${e}#${i}"></use>
        </svg>
      </a>
    </li>
  `}let He=[],Rt,ei,gt,hu=window.matchMedia("(max-width: 767px)");async function Cu(){try{if(He=await au(),gt=document.querySelector("#booksContainer"),He.length===0||Array.isArray(He)===!1){fn();return}Yo(),xu()}catch{fn()}}async function pu(n){n.preventDefault();const t=n.target.dataset.bookId;t&&(await lu(t),He=He.filter(i=>i._id!==t))}function mu(){const n=_u(He),e=Ar(n,ei);Mr(e,n,$o),yu(n[0])}function fn(){gt=document.querySelector(".bookshelf"),gt.innerHTML=gu()}function gu(){return`
  ${Is("Shopping List")}
  <div class="shopping_list-placeholder-container">
    <p class="shopping_list-placeholder-text">This page is empty, add some books and proceed to order.</p>
    <div class="shopping_list-placeholder-thumb"></div>
  </div>`}function Yo(){if(He.length===0||Array.isArray(He)===!1){fn();return}hu.matches?(Rt=4,ei=2):(Rt=3,ei=3),mu()}function _u(n){const e=[],t=Math.ceil(n.length/Rt);for(let i=0;i<t;i++){const s=i*Rt,o=n.slice(s,s+Rt);e.push(o)}return e}function $o(n){const e=cu(n);gt.insertAdjacentHTML("beforeend",e)}function yu(n){gt.innerHTML="",$o(n),gt.addEventListener("click",function(e){const t=e.target;(t.classList.contains("shoppinglist-delete-book-button")||t.classList.contains("shoppinglist-delete-book-button-svg"))&&pu(e)})}function xu(){const{height:n}=document.querySelector(".shoppinglist-list").firstElementChild.getBoundingClientRect();window.scrollBy({top:n*2,behavior:"smooth"})}window.addEventListener("resize",Kr(Yo,200));export{ft as N,Nr as a,Ir as b,Tr as c,wu as d,lu as e,ku as g,Cu as i,Is as m,bu as r};
